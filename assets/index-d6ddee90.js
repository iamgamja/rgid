var Xt=Object.defineProperty;var Gt=(X,D,h)=>D in X?Xt(X,D,{enumerable:!0,configurable:!0,writable:!0,value:h}):X[D]=h;var dt=(X,D,h)=>(Gt(X,typeof D!="symbol"?D+"":D,h),h);(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function h(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=h(n);fetch(n.href,t)}})();var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},it={},Vt={get exports(){return it},set exports(X){it=X}};(function(X,D){var h=st.createjs=st.createjs||{};/*!
* CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/st.createjs=st.createjs||{},h.extend=function(o,n){function t(){this.constructor=o}return t.prototype=n.prototype,o.prototype=new t},h.promote=function(o,n){var t=o.prototype,i=Object.getPrototypeOf&&Object.getPrototypeOf(t)||t.__proto__;if(i){t[(n+="_")+"constructor"]=i.constructor;for(var e in i)t.hasOwnProperty(e)&&typeof i[e]=="function"&&(t[n+e]=i[e])}return o},h.indexOf=function(o,n){for(var t=0,i=o.length;t<i;t++)if(n===o[t])return t;return-1},function(){function o(t,i,e){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!i,this.cancelable=!!e,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var n=o.prototype;n.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},n.stopPropagation=function(){this.propagationStopped=!0},n.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},n.remove=function(){this.removed=!0},n.clone=function(){return new o(this.type,this.bubbles,this.cancelable)},n.set=function(t){for(var i in t)this[i]=t[i];return this},n.toString=function(){return"[Event (type="+this.type+")]"},h.Event=o}(),function(){function o(){this._listeners=null,this._captureListeners=null}var n=o.prototype;o.initialize=function(t){t.addEventListener=n.addEventListener,t.on=n.on,t.removeEventListener=t.off=n.removeEventListener,t.removeAllEventListeners=n.removeAllEventListeners,t.hasEventListener=n.hasEventListener,t.dispatchEvent=n.dispatchEvent,t._dispatchEvent=n._dispatchEvent,t.willTrigger=n.willTrigger},n.addEventListener=function(t,i,e){var r;e?r=this._captureListeners=this._captureListeners||{}:r=this._listeners=this._listeners||{};var a=r[t];return a&&this.removeEventListener(t,i,e),a=r[t],a?a.push(i):r[t]=[i],i},n.on=function(t,i,e,r,a,u){return i.handleEvent&&(e=e||i,i=i.handleEvent),e=e||this,this.addEventListener(t,function(l){i.call(e,l,a),r&&l.remove()},u)},n.removeEventListener=function(t,i,e){var r=e?this._captureListeners:this._listeners;if(r){var a=r[t];if(a){for(var u=0,l=a.length;u<l;u++)if(a[u]==i){l==1?delete r[t]:a.splice(u,1);break}}}},n.off=n.removeEventListener,n.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},n.dispatchEvent=function(t,i,e){if(typeof t=="string"){var r=this._listeners;if(!i&&(!r||!r[t]))return!0;t=new h.Event(t,i,e)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch{}if(!t.bubbles||!this.parent)this._dispatchEvent(t,2);else{for(var a=this,u=[a];a.parent;)u.push(a=a.parent);var l,c=u.length;for(l=c-1;l>=0&&!t.propagationStopped;l--)u[l]._dispatchEvent(t,1+(l==0));for(l=1;l<c&&!t.propagationStopped;l++)u[l]._dispatchEvent(t,3)}return!t.defaultPrevented},n.hasEventListener=function(t){var i=this._listeners,e=this._captureListeners;return!!(i&&i[t]||e&&e[t])},n.willTrigger=function(t){for(var i=this;i;){if(i.hasEventListener(t))return!0;i=i.parent}return!1},n.toString=function(){return"[EventDispatcher]"},n._dispatchEvent=function(t,i){var e,r=i==1?this._captureListeners:this._listeners;if(t&&r){var a=r[t.type];if(!a||!(e=a.length))return;try{t.currentTarget=this}catch{}try{t.eventPhase=i}catch{}t.removed=!1,a=a.slice();for(var u=0;u<e&&!t.immediatePropagationStopped;u++){var l=a[u];l.handleEvent?l.handleEvent(t):l(t),t.removed&&(this.off(t.type,l,i==1),t.removed=!1)}}},h.EventDispatcher=o}(),function(){function o(){throw"Ticker cannot be instantiated."}o.RAF_SYNCHED="synched",o.RAF="raf",o.TIMEOUT="timeout",o.useRAF=!1,o.timingMode=null,o.maxDelta=0,o.paused=!1,o.removeEventListener=null,o.removeAllEventListeners=null,o.dispatchEvent=null,o.hasEventListener=null,o._listeners=null,h.EventDispatcher.initialize(o),o._addEventListener=o.addEventListener,o.addEventListener=function(){return!o._inited&&o.init(),o._addEventListener.apply(o,arguments)},o._inited=!1,o._startTime=0,o._pausedTime=0,o._ticks=0,o._pausedTicks=0,o._interval=50,o._lastTime=0,o._times=null,o._tickTimes=null,o._timerId=null,o._raf=!0,o.setInterval=function(t){o._interval=t,o._inited&&o._setupTick()},o.getInterval=function(){return o._interval},o.setFPS=function(t){o.setInterval(1e3/t)},o.getFPS=function(){return 1e3/o._interval};try{Object.defineProperties(o,{interval:{get:o.getInterval,set:o.setInterval},framerate:{get:o.getFPS,set:o.setFPS}})}catch(t){console.log(t)}o.init=function(){o._inited||(o._inited=!0,o._times=[],o._tickTimes=[],o._startTime=o._getTime(),o._times.push(o._lastTime=0),o.interval=o._interval)},o.reset=function(){if(o._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(o._timerId)}else clearTimeout(o._timerId);o.removeAllEventListeners("tick"),o._timerId=o._times=o._tickTimes=null,o._startTime=o._lastTime=o._ticks=0,o._inited=!1},o.getMeasuredTickTime=function(t){var i=0,e=o._tickTimes;if(!e||e.length<1)return-1;t=Math.min(e.length,t||o.getFPS()|0);for(var r=0;r<t;r++)i+=e[r];return i/t},o.getMeasuredFPS=function(t){var i=o._times;return!i||i.length<2?-1:(t=Math.min(i.length-1,t||o.getFPS()|0),1e3/((i[0]-i[t])/t))},o.setPaused=function(t){o.paused=t},o.getPaused=function(){return o.paused},o.getTime=function(t){return o._startTime?o._getTime()-(t?o._pausedTime:0):-1},o.getEventTime=function(t){return o._startTime?(o._lastTime||o._startTime)-(t?o._pausedTime:0):-1},o.getTicks=function(t){return o._ticks-(t?o._pausedTicks:0)},o._handleSynch=function(){o._timerId=null,o._setupTick(),o._getTime()-o._lastTime>=(o._interval-1)*.97&&o._tick()},o._handleRAF=function(){o._timerId=null,o._setupTick(),o._tick()},o._handleTimeout=function(){o._timerId=null,o._setupTick(),o._tick()},o._setupTick=function(){if(o._timerId==null){var t=o.timingMode||o.useRAF&&o.RAF_SYNCHED;if(t==o.RAF_SYNCHED||t==o.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i){o._timerId=i(t==o.RAF?o._handleRAF:o._handleSynch),o._raf=!0;return}}o._raf=!1,o._timerId=setTimeout(o._handleTimeout,o._interval)}},o._tick=function(){var t=o.paused,i=o._getTime(),e=i-o._lastTime;if(o._lastTime=i,o._ticks++,t&&(o._pausedTicks++,o._pausedTime+=e),o.hasEventListener("tick")){var r=new h.Event("tick"),a=o.maxDelta;r.delta=a&&e>a?a:e,r.paused=t,r.time=i,r.runTime=i-o._pausedTime,o.dispatchEvent(r)}for(o._tickTimes.unshift(o._getTime()-i);o._tickTimes.length>100;)o._tickTimes.pop();for(o._times.unshift(i);o._times.length>100;)o._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);o._getTime=function(){return(n&&n.call(performance)||new Date().getTime())-o._startTime},h.Ticker=o}(),function(){function o(){throw"UID cannot be instantiated"}o._nextID=0,o.get=function(){return o._nextID++},h.UID=o}(),function(){function o(t,i,e,r,a,u,l,c,d,f,_){this.Event_constructor(t,i,e),this.stageX=r,this.stageY=a,this.rawX=d??r,this.rawY=f??a,this.nativeEvent=u,this.pointerID=l,this.primary=!!c,this.relatedTarget=_}var n=h.extend(o,h.Event);n._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},n._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},n._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(n,{localX:{get:n._get_localX},localY:{get:n._get_localY},isTouch:{get:n._get_isTouch}})}catch{}n.clone=function(){return new o(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},n.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},h.MouseEvent=h.promote(o,"Event")}(),function(){function o(t,i,e,r,a,u){this.setValues(t,i,e,r,a,u)}var n=o.prototype;o.DEG_TO_RAD=Math.PI/180,o.identity=null,n.setValues=function(t,i,e,r,a,u){return this.a=t??1,this.b=i||0,this.c=e||0,this.d=r??1,this.tx=a||0,this.ty=u||0,this},n.append=function(t,i,e,r,a,u){var l=this.a,c=this.b,d=this.c,f=this.d;return(t!=1||i!=0||e!=0||r!=1)&&(this.a=l*t+d*i,this.b=c*t+f*i,this.c=l*e+d*r,this.d=c*e+f*r),this.tx=l*a+d*u+this.tx,this.ty=c*a+f*u+this.ty,this},n.prepend=function(t,i,e,r,a,u){var l=this.a,c=this.c,d=this.tx;return this.a=t*l+e*this.b,this.b=i*l+r*this.b,this.c=t*c+e*this.d,this.d=i*c+r*this.d,this.tx=t*d+e*this.ty+a,this.ty=i*d+r*this.ty+u,this},n.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},n.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},n.appendTransform=function(t,i,e,r,a,u,l,c,d){if(a%360)var f=a*o.DEG_TO_RAD,_=Math.cos(f),p=Math.sin(f);else _=1,p=0;return u||l?(u*=o.DEG_TO_RAD,l*=o.DEG_TO_RAD,this.append(Math.cos(l),Math.sin(l),-Math.sin(u),Math.cos(u),t,i),this.append(_*e,p*e,-p*r,_*r,0,0)):this.append(_*e,p*e,-p*r,_*r,t,i),(c||d)&&(this.tx-=c*this.a+d*this.c,this.ty-=c*this.b+d*this.d),this},n.prependTransform=function(t,i,e,r,a,u,l,c,d){if(a%360)var f=a*o.DEG_TO_RAD,_=Math.cos(f),p=Math.sin(f);else _=1,p=0;return(c||d)&&(this.tx-=c,this.ty-=d),u||l?(u*=o.DEG_TO_RAD,l*=o.DEG_TO_RAD,this.prepend(_*e,p*e,-p*r,_*r,0,0),this.prepend(Math.cos(l),Math.sin(l),-Math.sin(u),Math.cos(u),t,i)):this.prepend(_*e,p*e,-p*r,_*r,t,i),this},n.rotate=function(t){t=t*o.DEG_TO_RAD;var i=Math.cos(t),e=Math.sin(t),r=this.a,a=this.b;return this.a=r*i+this.c*e,this.b=a*i+this.d*e,this.c=-r*e+this.c*i,this.d=-a*e+this.d*i,this},n.skew=function(t,i){return t=t*o.DEG_TO_RAD,i=i*o.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(t),Math.cos(t),0,0),this},n.scale=function(t,i){return this.a*=t,this.b*=t,this.c*=i,this.d*=i,this},n.translate=function(t,i){return this.tx+=this.a*t+this.c*i,this.ty+=this.b*t+this.d*i,this},n.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},n.invert=function(){var t=this.a,i=this.b,e=this.c,r=this.d,a=this.tx,u=t*r-i*e;return this.a=r/u,this.b=-i/u,this.c=-e/u,this.d=t/u,this.tx=(e*this.ty-r*a)/u,this.ty=-(t*this.ty-i*a)/u,this},n.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},n.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},n.transformPoint=function(t,i,e){return e=e||{},e.x=t*this.a+i*this.c+this.tx,e.y=t*this.b+i*this.d+this.ty,e},n.decompose=function(t){t==null&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),e=Math.atan2(this.b,this.a),r=Math.abs(1-i/e);return r<1e-5?(t.rotation=e/o.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=i/o.DEG_TO_RAD,t.skewY=e/o.DEG_TO_RAD),t},n.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},n.clone=function(){return new o(this.a,this.b,this.c,this.d,this.tx,this.ty)},n.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},o.identity=new o,h.Matrix2D=o}(),function(){function o(t,i,e,r,a){this.setValues(t,i,e,r,a)}var n=o.prototype;n.setValues=function(t,i,e,r,a){return this.visible=t==null?!0:!!t,this.alpha=i??1,this.shadow=e,this.compositeOperation=r,this.matrix=a||this.matrix&&this.matrix.identity()||new h.Matrix2D,this},n.append=function(t,i,e,r,a){return this.alpha*=i,this.shadow=e||this.shadow,this.compositeOperation=r||this.compositeOperation,this.visible=this.visible&&t,a&&this.matrix.appendMatrix(a),this},n.prepend=function(t,i,e,r,a){return this.alpha*=i,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||r,this.visible=this.visible&&t,a&&this.matrix.prependMatrix(a),this},n.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},n.clone=function(){return new o(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},h.DisplayProps=o}(),function(){function o(t,i){this.setValues(t,i)}var n=o.prototype;n.setValues=function(t,i){return this.x=t||0,this.y=i||0,this},n.copy=function(t){return this.x=t.x,this.y=t.y,this},n.clone=function(){return new o(this.x,this.y)},n.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},h.Point=o}(),function(){function o(t,i,e,r){this.setValues(t,i,e,r)}var n=o.prototype;n.setValues=function(t,i,e,r){return this.x=t||0,this.y=i||0,this.width=e||0,this.height=r||0,this},n.extend=function(t,i,e,r){return e=e||0,r=r||0,t+e>this.x+this.width&&(this.width=t+e-this.x),i+r>this.y+this.height&&(this.height=i+r-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),i<this.y&&(this.height+=this.y-i,this.y=i),this},n.pad=function(t,i,e,r){return this.x-=i,this.y-=t,this.width+=i+r,this.height+=t+e,this},n.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},n.contains=function(t,i,e,r){return e=e||0,r=r||0,t>=this.x&&t+e<=this.x+this.width&&i>=this.y&&i+r<=this.y+this.height},n.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},n.intersection=function(t){var i=t.x,e=t.y,r=i+t.width,a=e+t.height;return this.x>i&&(i=this.x),this.y>e&&(e=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<a&&(a=this.y+this.height),r<=i||a<=e?null:new o(i,e,r-i,a-e)},n.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},n.isEmpty=function(){return this.width<=0||this.height<=0},n.clone=function(){return new o(this.x,this.y,this.width,this.height)},n.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},h.Rectangle=o}(),function(){function o(t,i,e,r,a,u,l){t.addEventListener&&(this.target=t,this.overLabel=e??"over",this.outLabel=i??"out",this.downLabel=r??"down",this.play=a,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),u&&(l&&(u.actionsEnabled=!1,u.gotoAndStop&&u.gotoAndStop(l)),t.hitArea=u))}var n=o.prototype;n.setEnabled=function(t){if(t!=this._enabled){var i=this.target;this._enabled=t,t?(i.cursor="pointer",i.addEventListener("rollover",this),i.addEventListener("rollout",this),i.addEventListener("mousedown",this),i.addEventListener("pressup",this),i._reset&&(i.__reset=i._reset,i._reset=this._reset)):(i.cursor=null,i.removeEventListener("rollover",this),i.removeEventListener("rollout",this),i.removeEventListener("mousedown",this),i.removeEventListener("pressup",this),i.__reset&&(i._reset=i.__reset,delete i.__reset))}},n.getEnabled=function(){return this._enabled};try{Object.defineProperties(n,{enabled:{get:n.getEnabled,set:n.setEnabled}})}catch{}n.toString=function(){return"[ButtonHelper]"},n.handleEvent=function(t){var i,e=this.target,r=t.type;r=="mousedown"?(this._isPressed=!0,i=this.downLabel):r=="pressup"?(this._isPressed=!1,i=this._isOver?this.overLabel:this.outLabel):r=="rollover"?(this._isOver=!0,i=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,i=this._isPressed?this.overLabel:this.outLabel),this.play?e.gotoAndPlay&&e.gotoAndPlay(i):e.gotoAndStop&&e.gotoAndStop(i)},n._reset=function(){var t=this.paused;this.__reset(),this.paused=t},h.ButtonHelper=o}(),function(){function o(t,i,e,r){this.color=t||"black",this.offsetX=i||0,this.offsetY=e||0,this.blur=r||0}var n=o.prototype;o.identity=new o("transparent",0,0,0),n.toString=function(){return"[Shadow]"},n.clone=function(){return new o(this.color,this.offsetX,this.offsetY,this.blur)},h.Shadow=o}(),function(){function o(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var n=h.extend(o,h.EventDispatcher);n.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(n,{animations:{get:n.getAnimations}})}catch{}n.getNumFrames=function(t){if(t==null)return this._frames?this._frames.length:this._numFrames||0;var i=this._data[t];return i==null?0:i.frames.length},n.getAnimation=function(t){return this._data[t]},n.getFrame=function(t){var i;return this._frames&&(i=this._frames[t])?i:null},n.getFrameBounds=function(t,i){var e=this.getFrame(t);return e?(i||new h.Rectangle).setValues(-e.regX,-e.regY,e.rect.width,e.rect.height):null},n.toString=function(){return"[SpriteSheet]"},n.clone=function(){throw"SpriteSheet cannot be cloned."},n._parseData=function(t){var i,e,r,a;if(t!=null){if(this.framerate=t.framerate||0,t.images&&(e=t.images.length)>0)for(a=this._images=[],i=0;i<e;i++){var u=t.images[i];if(typeof u=="string"){var l=u;u=document.createElement("img"),u.src=l}a.push(u),!u.getContext&&!u.naturalWidth&&(this._loadCount++,this.complete=!1,function(v,g){u.onload=function(){v._handleImageLoad(g)}}(this,l),function(v,g){u.onerror=function(){v._handleImageError(g)}}(this,l))}if(t.frames!=null)if(Array.isArray(t.frames))for(this._frames=[],a=t.frames,i=0,e=a.length;i<e;i++){var c=a[i];this._frames.push({image:this._images[c[4]?c[4]:0],rect:new h.Rectangle(c[0],c[1],c[2],c[3]),regX:c[5]||0,regY:c[6]||0})}else r=t.frames,this._frameWidth=r.width,this._frameHeight=r.height,this._regX=r.regX||0,this._regY=r.regY||0,this._spacing=r.spacing||0,this._margin=r.margin||0,this._numFrames=r.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(r=t.animations)!=null){this._data={};var d;for(d in r){var f={name:d},_=r[d];if(typeof _=="number")a=f.frames=[_];else if(Array.isArray(_))if(_.length==1)f.frames=[_[0]];else for(f.speed=_[3],f.next=_[2],a=f.frames=[],i=_[0];i<=_[1];i++)a.push(i);else{f.speed=_.speed,f.next=_.next;var p=_.frames;a=f.frames=typeof p=="number"?[p]:p.slice(0)}(f.next===!0||f.next===void 0)&&(f.next=d),(f.next===!1||a.length<2&&f.next==d)&&(f.next=null),f.speed||(f.speed=1),this._animations.push(d),this._data[d]=f}}}},n._handleImageLoad=function(t){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},n._handleImageError=function(t){var i=new h.Event("error");i.src=t,this.dispatchEvent(i),--this._loadCount==0&&this.dispatchEvent("complete")},n._calculateFrames=function(){if(this._frames||this._frameWidth==0)return;this._frames=[];var t=this._numFrames||1e5,i=0,e=this._frameWidth,r=this._frameHeight,a=this._spacing,u=this._margin;t:for(var l=0,c=this._images;l<c.length;l++)for(var d=c[l],f=d.width,_=d.height,p=u;p<=_-u-r;){for(var v=u;v<=f-u-e;){if(i>=t)break t;i++,this._frames.push({image:d,rect:new h.Rectangle(v,p,e,r),regX:this._regX,regY:this._regY}),v+=e+a}p+=r+a}this._numFrames=i},h.SpriteSheet=h.promote(o,"EventDispatcher")}(),function(){function o(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var n=o.prototype,t=o;o.getRGB=function(e,r,a,u){return e!=null&&a==null&&(u=r,a=e&255,r=e>>8&255,e=e>>16&255),u==null?"rgb("+e+","+r+","+a+")":"rgba("+e+","+r+","+a+","+u+")"},o.getHSL=function(e,r,a,u){return u==null?"hsl("+e%360+","+r+"%,"+a+"%)":"hsla("+e%360+","+r+"%,"+a+"%,"+u+")"},o.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},o.STROKE_CAPS_MAP=["butt","round","square"],o.STROKE_JOINTS_MAP=["miter","round","bevel"];var i=h.createCanvas?h.createCanvas():document.createElement("canvas");i.getContext&&(o._ctx=i.getContext("2d"),i.width=i.height=1),n.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(n,{instructions:{get:n.getInstructions}})}catch{}n.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},n.draw=function(e,r){this._updateInstructions();for(var a=this._instructions,u=this._storeIndex,l=a.length;u<l;u++)a[u].exec(e,r)},n.drawAsPath=function(e){this._updateInstructions();for(var r,a=this._instructions,u=this._storeIndex,l=a.length;u<l;u++)(r=a[u]).path!==!1&&r.exec(e)},n.moveTo=function(e,r){return this.append(new t.MoveTo(e,r),!0)},n.lineTo=function(e,r){return this.append(new t.LineTo(e,r))},n.arcTo=function(e,r,a,u,l){return this.append(new t.ArcTo(e,r,a,u,l))},n.arc=function(e,r,a,u,l,c){return this.append(new t.Arc(e,r,a,u,l,c))},n.quadraticCurveTo=function(e,r,a,u){return this.append(new t.QuadraticCurveTo(e,r,a,u))},n.bezierCurveTo=function(e,r,a,u,l,c){return this.append(new t.BezierCurveTo(e,r,a,u,l,c))},n.rect=function(e,r,a,u){return this.append(new t.Rect(e,r,a,u))},n.closePath=function(){return this._activeInstructions.length?this.append(new t.ClosePath):this},n.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},n.beginFill=function(e){return this._setFill(e?new t.Fill(e):null)},n.beginLinearGradientFill=function(e,r,a,u,l,c){return this._setFill(new t.Fill().linearGradient(e,r,a,u,l,c))},n.beginRadialGradientFill=function(e,r,a,u,l,c,d,f){return this._setFill(new t.Fill().radialGradient(e,r,a,u,l,c,d,f))},n.beginBitmapFill=function(e,r,a){return this._setFill(new t.Fill(null,a).bitmap(e,r))},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(e,r,a,u,l){return this._updateInstructions(!0),this._strokeStyle=this.command=new t.StrokeStyle(e,r,a,u,l),this._stroke&&(this._stroke.ignoreScale=l),this._strokeIgnoreScale=l,this},n.setStrokeDash=function(e,r){return this._updateInstructions(!0),this._strokeDash=this.command=new t.StrokeDash(e,r),this},n.beginStroke=function(e){return this._setStroke(e?new t.Stroke(e):null)},n.beginLinearGradientStroke=function(e,r,a,u,l,c){return this._setStroke(new t.Stroke().linearGradient(e,r,a,u,l,c))},n.beginRadialGradientStroke=function(e,r,a,u,l,c,d,f){return this._setStroke(new t.Stroke().radialGradient(e,r,a,u,l,c,d,f))},n.beginBitmapStroke=function(e,r){return this._setStroke(new t.Stroke().bitmap(e,r))},n.endStroke=function(){return this.beginStroke()},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,r,a,u,l){return this.drawRoundRectComplex(e,r,a,u,l,l,l,l)},n.drawRoundRectComplex=function(e,r,a,u,l,c,d,f){return this.append(new t.RoundRect(e,r,a,u,l,c,d,f))},n.drawCircle=function(e,r,a){return this.append(new t.Circle(e,r,a))},n.drawEllipse=function(e,r,a,u){return this.append(new t.Ellipse(e,r,a,u))},n.drawPolyStar=function(e,r,a,u,l,c){return this.append(new t.PolyStar(e,r,a,u,l,c))},n.append=function(e,r){return this._activeInstructions.push(e),this.command=e,r||(this._dirty=!0),this},n.decodePath=function(e){for(var r=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],a=[2,2,4,6,0],u=0,l=e.length,c=[],d=0,f=0,_=o.BASE_64;u<l;){var p=e.charAt(u),v=_[p],g=v>>3,E=r[g];if(!E||v&3)throw"bad path data (@"+u+"): "+p;var w=a[g];g||(d=f=0),c.length=0,u++;for(var R=(v>>2&1)+2,M=0;M<w;M++){var x=_[e.charAt(u)],C=x>>5?-1:1;x=(x&31)<<6|_[e.charAt(u+1)],R==3&&(x=x<<6|_[e.charAt(u+2)]),x=C*x/10,M%2?d=x+=d:f=x+=f,c[M]=x,u+=R}E.apply(this,c)}return this},n.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},n.unstore=function(){return this._storeIndex=0,this},n.clone=function(){var e=new o;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.sd=n.setStrokeDash,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(e){var r=this._instructions,a=this._activeInstructions,u=this._commitIndex;if(this._dirty&&a.length){r.length=u,r.push(o.beginCmd);var l=a.length,c=r.length;r.length=c+l;for(var d=0;d<l;d++)r[d+c]=a[d];this._fill&&r.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,r.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,r.push(this._strokeStyle)),r.push(this._stroke)),this._dirty=!1}e&&(a.length=0,this._commitIndex=r.length)},n._setFill=function(e){return this._updateInstructions(!0),this.command=this._fill=e,this},n._setStroke=function(e){return this._updateInstructions(!0),(this.command=this._stroke=e)&&(e.ignoreScale=this._strokeIgnoreScale),this},(t.LineTo=function(e,r){this.x=e,this.y=r}).prototype.exec=function(e){e.lineTo(this.x,this.y)},(t.MoveTo=function(e,r){this.x=e,this.y=r}).prototype.exec=function(e){e.moveTo(this.x,this.y)},(t.ArcTo=function(e,r,a,u,l){this.x1=e,this.y1=r,this.x2=a,this.y2=u,this.radius=l}).prototype.exec=function(e){e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(t.Arc=function(e,r,a,u,l,c){this.x=e,this.y=r,this.radius=a,this.startAngle=u,this.endAngle=l,this.anticlockwise=!!c}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(t.QuadraticCurveTo=function(e,r,a,u){this.cpx=e,this.cpy=r,this.x=a,this.y=u}).prototype.exec=function(e){e.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(t.BezierCurveTo=function(e,r,a,u,l,c){this.cp1x=e,this.cp1y=r,this.cp2x=a,this.cp2y=u,this.x=l,this.y=c}).prototype.exec=function(e){e.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(t.Rect=function(e,r,a,u){this.x=e,this.y=r,this.w=a,this.h=u}).prototype.exec=function(e){e.rect(this.x,this.y,this.w,this.h)},(t.ClosePath=function(){}).prototype.exec=function(e){e.closePath()},(t.BeginPath=function(){}).prototype.exec=function(e){e.beginPath()},n=(t.Fill=function(e,r){this.style=e,this.matrix=r}).prototype,n.exec=function(e){if(this.style){e.fillStyle=this.style;var r=this.matrix;r&&(e.save(),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),e.fill(),r&&e.restore()}},n.linearGradient=function(e,r,a,u,l,c){for(var d=this.style=o._ctx.createLinearGradient(a,u,l,c),f=0,_=e.length;f<_;f++)d.addColorStop(r[f],e[f]);return d.props={colors:e,ratios:r,x0:a,y0:u,x1:l,y1:c,type:"linear"},this},n.radialGradient=function(e,r,a,u,l,c,d,f){for(var _=this.style=o._ctx.createRadialGradient(a,u,l,c,d,f),p=0,v=e.length;p<v;p++)_.addColorStop(r[p],e[p]);return _.props={colors:e,ratios:r,x0:a,y0:u,r0:l,x1:c,y1:d,r1:f,type:"radial"},this},n.bitmap=function(e,r){if(e.naturalWidth||e.getContext||e.readyState>=2){var a=this.style=o._ctx.createPattern(e,r||"");a.props={image:e,repetition:r,type:"bitmap"}}return this},n.path=!1,n=(t.Stroke=function(e,r){this.style=e,this.ignoreScale=r}).prototype,n.exec=function(e){this.style&&(e.strokeStyle=this.style,this.ignoreScale&&(e.save(),e.setTransform(1,0,0,1,0,0)),e.stroke(),this.ignoreScale&&e.restore())},n.linearGradient=t.Fill.prototype.linearGradient,n.radialGradient=t.Fill.prototype.radialGradient,n.bitmap=t.Fill.prototype.bitmap,n.path=!1,n=(t.StrokeStyle=function(e,r,a,u,l){this.width=e,this.caps=r,this.joints=a,this.miterLimit=u,this.ignoreScale=l}).prototype,n.exec=function(e){e.lineWidth=this.width==null?"1":this.width,e.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:o.STROKE_CAPS_MAP[this.caps],e.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:o.STROKE_JOINTS_MAP[this.joints],e.miterLimit=this.miterLimit==null?"10":this.miterLimit,e.ignoreScale=this.ignoreScale==null?!1:this.ignoreScale},n.path=!1,(t.StrokeDash=function(e,r){this.segments=e,this.offset=r||0}).prototype.exec=function(e){e.setLineDash&&(e.setLineDash(this.segments||t.StrokeDash.EMPTY_SEGMENTS),e.lineDashOffset=this.offset||0)},t.StrokeDash.EMPTY_SEGMENTS=[],(t.RoundRect=function(e,r,a,u,l,c,d,f){this.x=e,this.y=r,this.w=a,this.h=u,this.radiusTL=l,this.radiusTR=c,this.radiusBR=d,this.radiusBL=f}).prototype.exec=function(e){var r=(_<p?_:p)/2,a=0,u=0,l=0,c=0,d=this.x,f=this.y,_=this.w,p=this.h,v=this.radiusTL,g=this.radiusTR,E=this.radiusBR,w=this.radiusBL;v<0&&(v*=a=-1),v>r&&(v=r),g<0&&(g*=u=-1),g>r&&(g=r),E<0&&(E*=l=-1),E>r&&(E=r),w<0&&(w*=c=-1),w>r&&(w=r),e.moveTo(d+_-g,f),e.arcTo(d+_+g*u,f-g*u,d+_,f+g,g),e.lineTo(d+_,f+p-E),e.arcTo(d+_+E*l,f+p+E*l,d+_-E,f+p,E),e.lineTo(d+w,f+p),e.arcTo(d-w*c,f+p+w*c,d,f+p-w,w),e.lineTo(d,f+v),e.arcTo(d-v*a,f-v*a,d+v,f,v),e.closePath()},(t.Circle=function(e,r,a){this.x=e,this.y=r,this.radius=a}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,0,Math.PI*2)},(t.Ellipse=function(e,r,a,u){this.x=e,this.y=r,this.w=a,this.h=u}).prototype.exec=function(e){var r=this.x,a=this.y,u=this.w,l=this.h,c=.5522848,d=u/2*c,f=l/2*c,_=r+u,p=a+l,v=r+u/2,g=a+l/2;e.moveTo(r,g),e.bezierCurveTo(r,g-f,v-d,a,v,a),e.bezierCurveTo(v+d,a,_,g-f,_,g),e.bezierCurveTo(_,g+f,v+d,p,v,p),e.bezierCurveTo(v-d,p,r,g+f,r,g)},(t.PolyStar=function(e,r,a,u,l,c){this.x=e,this.y=r,this.radius=a,this.sides=u,this.pointSize=l,this.angle=c}).prototype.exec=function(e){var r=this.x,a=this.y,u=this.radius,l=(this.angle||0)/180*Math.PI,c=this.sides,d=1-(this.pointSize||0),f=Math.PI/c;e.moveTo(r+Math.cos(l)*u,a+Math.sin(l)*u);for(var _=0;_<c;_++)l+=f,d!=1&&e.lineTo(r+Math.cos(l)*u*d,a+Math.sin(l)*u*d),l+=f,e.lineTo(r+Math.cos(l)*u,a+Math.sin(l)*u);e.closePath()},o.beginCmd=new t.BeginPath,h.Graphics=o}(),function(){function o(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=h.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new h.DisplayProps,this._rectangle=new h.Rectangle,this._bounds=null}var n=h.extend(o,h.EventDispatcher);o._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],o.suppressCrossDomainErrors=!1,o._snapToPixelEnabled=!1;var t=h.createCanvas?h.createCanvas():document.createElement("canvas");t.getContext&&(o._hitTestCanvas=t,o._hitTestContext=t.getContext("2d"),t.width=t.height=1),o._nextCacheID=1,n.getStage=function(){for(var i=this,e=h.Stage;i.parent;)i=i.parent;return i instanceof e?i:null};try{Object.defineProperties(n,{stage:{get:n.getStage}})}catch{}n.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},n.draw=function(i,e){var r=this.cacheCanvas;if(e||!r)return!1;var a=this._cacheScale;return i.drawImage(r,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,r.width/a,r.height/a),!0},n.updateContext=function(i){var e=this,r=e.mask,a=e._props.matrix;r&&r.graphics&&!r.graphics.isEmpty()&&(r.getMatrix(a),i.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),r.graphics.drawAsPath(i),i.clip(),a.invert(),i.transform(a.a,a.b,a.c,a.d,a.tx,a.ty)),this.getMatrix(a);var u=a.tx,l=a.ty;o._snapToPixelEnabled&&e.snapToPixel&&(u=u+(u<0?-.5:.5)|0,l=l+(l<0?-.5:.5)|0),i.transform(a.a,a.b,a.c,a.d,u,l),i.globalAlpha*=e.alpha,e.compositeOperation&&(i.globalCompositeOperation=e.compositeOperation),e.shadow&&this._applyShadow(i,e.shadow)},n.cache=function(i,e,r,a,u){u=u||1,this.cacheCanvas||(this.cacheCanvas=h.createCanvas?h.createCanvas():document.createElement("canvas")),this._cacheWidth=r,this._cacheHeight=a,this._cacheOffsetX=i,this._cacheOffsetY=e,this._cacheScale=u,this.updateCache()},n.updateCache=function(i){var e=this.cacheCanvas;if(!e)throw"cache() must be called before updateCache()";var r=this._cacheScale,a=this._cacheOffsetX*r,u=this._cacheOffsetY*r,l=this._cacheWidth,c=this._cacheHeight,d=e.getContext("2d"),f=this._getFilterBounds();a+=this._filterOffsetX=f.x,u+=this._filterOffsetY=f.y,l=Math.ceil(l*r)+f.width,c=Math.ceil(c*r)+f.height,l!=e.width||c!=e.height?(e.width=l,e.height=c):i||d.clearRect(0,0,l+1,c+1),d.save(),d.globalCompositeOperation=i,d.setTransform(r,0,0,r,-a,-u),this.draw(d,!0),this._applyFilters(),d.restore(),this.cacheID=o._nextCacheID++},n.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},n.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},n.localToGlobal=function(i,e,r){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(i,e,r||new h.Point)},n.globalToLocal=function(i,e,r){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(i,e,r||new h.Point)},n.localToLocal=function(i,e,r,a){return a=this.localToGlobal(i,e,a),r.globalToLocal(a.x,a.y,a)},n.setTransform=function(i,e,r,a,u,l,c,d,f){return this.x=i||0,this.y=e||0,this.scaleX=r??1,this.scaleY=a??1,this.rotation=u||0,this.skewX=l||0,this.skewY=c||0,this.regX=d||0,this.regY=f||0,this},n.getMatrix=function(i){var e=this,r=i&&i.identity()||new h.Matrix2D;return e.transformMatrix?r.copy(e.transformMatrix):r.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},n.getConcatenatedMatrix=function(i){for(var e=this,r=this.getMatrix(i);e=e.parent;)r.prependMatrix(e.getMatrix(e._props.matrix));return r},n.getConcatenatedDisplayProps=function(i){i=i?i.identity():new h.DisplayProps;var e=this,r=e.getMatrix(i.matrix);do i.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&r.prependMatrix(e.getMatrix(e._props.matrix));while(e=e.parent);return i},n.hitTest=function(i,e){var r=o._hitTestContext;r.setTransform(1,0,0,1,-i,-e),this.draw(r);var a=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),a},n.set=function(i){for(var e in i)this[e]=i[e];return this},n.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var i=this.cacheCanvas;if(i){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,i.width/e,i.height/e)}return null},n.getTransformedBounds=function(){return this._getBounds()},n.setBounds=function(i,e,r,a){i==null&&(this._bounds=i),this._bounds=(this._bounds||new h.Rectangle).setValues(i,e,r,a)},n.clone=function(){return this._cloneProps(new o)},n.toString=function(){return"[DisplayObject (name="+this.name+")]"},n._cloneProps=function(i){return i.alpha=this.alpha,i.mouseEnabled=this.mouseEnabled,i.tickEnabled=this.tickEnabled,i.name=this.name,i.regX=this.regX,i.regY=this.regY,i.rotation=this.rotation,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.shadow=this.shadow,i.skewX=this.skewX,i.skewY=this.skewY,i.visible=this.visible,i.x=this.x,i.y=this.y,i.compositeOperation=this.compositeOperation,i.snapToPixel=this.snapToPixel,i.filters=this.filters==null?null:this.filters.slice(0),i.mask=this.mask,i.hitArea=this.hitArea,i.cursor=this.cursor,i._bounds=this._bounds,i},n._applyShadow=function(i,e){e=e||Shadow.identity,i.shadowColor=e.color,i.shadowOffsetX=e.offsetX,i.shadowOffsetY=e.offsetY,i.shadowBlur=e.blur},n._tick=function(i){var e=this._listeners;e&&e.tick&&(i.target=null,i.propagationStopped=i.immediatePropagationStopped=!1,this.dispatchEvent(i))},n._testHit=function(i){try{var e=i.getImageData(0,0,1,1).data[3]>1}catch{if(!o.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return e},n._applyFilters=function(){if(!(!this.filters||this.filters.length==0||!this.cacheCanvas))for(var i=this.filters.length,e=this.cacheCanvas.getContext("2d"),r=this.cacheCanvas.width,a=this.cacheCanvas.height,u=0;u<i;u++)this.filters[u].applyFilter(e,0,0,r,a)},n._getFilterBounds=function(i){var e,r=this.filters,a=this._rectangle.setValues(0,0,0,0);if(!r||!(e=r.length))return a;for(var u=0;u<e;u++){var l=this.filters[u];l.getBounds&&l.getBounds(a)}return a},n._getBounds=function(i,e){return this._transformBounds(this.getBounds(),i,e)},n._transformBounds=function(i,e,r){if(!i)return i;var a=i.x,u=i.y,l=i.width,c=i.height,d=this._props.matrix;d=r?d.identity():this.getMatrix(d),(a||u)&&d.appendTransform(0,0,1,1,0,0,0,-a,-u),e&&d.prependMatrix(e);var f=l*d.a,_=l*d.b,p=c*d.c,v=c*d.d,g=d.tx,E=d.ty,w=g,R=g,M=E,x=E;return(a=f+g)<w?w=a:a>R&&(R=a),(a=f+p+g)<w?w=a:a>R&&(R=a),(a=p+g)<w?w=a:a>R&&(R=a),(u=_+E)<M?M=u:u>x&&(x=u),(u=_+v+E)<M?M=u:u>x&&(x=u),(u=v+E)<M?M=u:u>x&&(x=u),i.setValues(w,M,R-w,x-M)},n._hasMouseEventListener=function(){for(var i=o._MOUSE_EVENTS,e=0,r=i.length;e<r;e++)if(this.hasEventListener(i[e]))return!0;return!!this.cursor},h.DisplayObject=h.promote(o,"EventDispatcher")}(),function(){function o(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var n=h.extend(o,h.DisplayObject);n.getNumChildren=function(){return this.children.length};try{Object.defineProperties(n,{numChildren:{get:n.getNumChildren}})}catch{}n.initialize=o,n.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},n.draw=function(t,i){if(this.DisplayObject_draw(t,i))return!0;for(var e=this.children.slice(),r=0,a=e.length;r<a;r++){var u=e[r];u.isVisible()&&(t.save(),u.updateContext(t),u.draw(t),t.restore())}return!0},n.addChild=function(t){if(t==null)return t;var i=arguments.length;if(i>1){for(var e=0;e<i;e++)this.addChild(arguments[e]);return arguments[i-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},n.addChildAt=function(t,i){var e=arguments.length,r=arguments[e-1];if(r<0||r>this.children.length)return arguments[e-2];if(e>2){for(var a=0;a<e-1;a++)this.addChildAt(arguments[a],r+a);return arguments[e-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(i,0,t),t.dispatchEvent("added"),t},n.removeChild=function(t){var i=arguments.length;if(i>1){for(var e=!0,r=0;r<i;r++)e=e&&this.removeChild(arguments[r]);return e}return this.removeChildAt(h.indexOf(this.children,t))},n.removeChildAt=function(t){var i=arguments.length;if(i>1){for(var e=[],r=0;r<i;r++)e[r]=arguments[r];e.sort(function(l,c){return c-l});for(var a=!0,r=0;r<i;r++)a=a&&this.removeChildAt(e[r]);return a}if(t<0||t>this.children.length-1)return!1;var u=this.children[t];return u&&(u.parent=null),this.children.splice(t,1),u.dispatchEvent("removed"),!0},n.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},n.getChildAt=function(t){return this.children[t]},n.getChildByName=function(t){for(var i=this.children,e=0,r=i.length;e<r;e++)if(i[e].name==t)return i[e];return null},n.sortChildren=function(t){this.children.sort(t)},n.getChildIndex=function(t){return h.indexOf(this.children,t)},n.swapChildrenAt=function(t,i){var e=this.children,r=e[t],a=e[i];!r||!a||(e[t]=a,e[i]=r)},n.swapChildren=function(t,i){for(var e=this.children,r,a,u=0,l=e.length;u<l&&(e[u]==t&&(r=u),e[u]==i&&(a=u),!(r!=null&&a!=null));u++);u!=l&&(e[r]=i,e[a]=t)},n.setChildIndex=function(t,i){var e=this.children,r=e.length;if(!(t.parent!=this||i<0||i>=r)){for(var a=0;a<r&&e[a]!=t;a++);a==r||a==i||(e.splice(a,1),e.splice(i,0,t))}},n.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},n.hitTest=function(t,i){return this.getObjectUnderPoint(t,i)!=null},n.getObjectsUnderPoint=function(t,i,e){var r=[],a=this.localToGlobal(t,i);return this._getObjectsUnderPoint(a.x,a.y,r,e>0,e==1),r},n.getObjectUnderPoint=function(t,i,e){var r=this.localToGlobal(t,i);return this._getObjectsUnderPoint(r.x,r.y,null,e>0,e==1)},n.getBounds=function(){return this._getBounds(null,!0)},n.getTransformedBounds=function(){return this._getBounds()},n.clone=function(t){var i=this._cloneProps(new o);return t&&this._cloneChildren(i),i},n.toString=function(){return"[Container (name="+this.name+")]"},n._tick=function(t){if(this.tickChildren)for(var i=this.children.length-1;i>=0;i--){var e=this.children[i];e.tickEnabled&&e._tick&&e._tick(t)}this.DisplayObject__tick(t)},n._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var i=t.children,e=0,r=this.children.length;e<r;e++){var a=this.children[e].clone(!0);a.parent=t,i.push(a)}},n._getObjectsUnderPoint=function(t,i,e,r,a,u){if(u=u||0,!u&&!this._testMask(this,t,i))return null;var l,c=h.DisplayObject._hitTestContext;a=a||r&&this._hasMouseEventListener();for(var d=this.children,f=d.length,_=f-1;_>=0;_--){var p=d[_],v=p.hitArea;if(!(!p.visible||!v&&!p.isVisible()||r&&!p.mouseEnabled)&&!(!v&&!this._testMask(p,t,i)))if(!v&&p instanceof o){var g=p._getObjectsUnderPoint(t,i,e,r,a,u+1);if(!e&&g)return r&&!this.mouseChildren?this:g}else{if(r&&!a&&!p._hasMouseEventListener())continue;var E=p.getConcatenatedDisplayProps(p._props);if(l=E.matrix,v&&(l.appendMatrix(v.getMatrix(v._props.matrix)),E.alpha=v.alpha),c.globalAlpha=E.alpha,c.setTransform(l.a,l.b,l.c,l.d,l.tx-t,l.ty-i),(v||p).draw(c),!this._testHit(c))continue;if(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),e)e.push(p);else return r&&!this.mouseChildren?this:p}}return null},n._testMask=function(t,i,e){var r=t.mask;if(!r||!r.graphics||r.graphics.isEmpty())return!0;var a=this._props.matrix,u=t.parent;a=u?u.getConcatenatedMatrix(a):a.identity(),a=r.getMatrix(r._props.matrix).prependMatrix(a);var l=h.DisplayObject._hitTestContext;return l.setTransform(a.a,a.b,a.c,a.d,a.tx-i,a.ty-e),r.graphics.drawAsPath(l),l.fillStyle="#000",l.fill(),this._testHit(l)?(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!0):!1},n._getBounds=function(t,i){var e=this.DisplayObject_getBounds();if(e)return this._transformBounds(e,t,i);var r=this._props.matrix;r=i?r.identity():this.getMatrix(r),t&&r.prependMatrix(t);for(var a=this.children.length,u=null,l=0;l<a;l++){var c=this.children[l];!c.visible||!(e=c._getBounds(r))||(u?u.extend(e.x,e.y,e.width,e.height):u=e.clone())}return u},h.Container=h.promote(o,"DisplayObject")}(),function(){function o(t){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof t=="string"?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var n=h.extend(o,h.Container);n._get_nextStage=function(){return this._nextStage},n._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(n,{nextStage:{get:n._get_nextStage,set:n._set_nextStage}})}catch{}n.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){h.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var i=this.drawRect,e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),this.autoClear&&(i?e.clearRect(i.x,i.y,i.width,i.height):e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),e.save(),this.drawRect&&(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.clip()),this.updateContext(e),this.draw(e,!1),e.restore(),this.dispatchEvent("drawend")}},n.tick=function(t){if(!(!this.tickEnabled||this.dispatchEvent("tickstart",!1,!0)===!1)){var i=new h.Event("tick");if(t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);this._tick(i),this.dispatchEvent("tickend")}},n.handleEvent=function(t){t.type=="tick"&&this.update(t)},n.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},n.toDataURL=function(t,i){var e,r=this.canvas.getContext("2d"),a=this.canvas.width,u=this.canvas.height;if(t){e=r.getImageData(0,0,a,u);var l=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,a,u)}var c=this.canvas.toDataURL(i||"image/png");return t&&(r.putImageData(e,0,0),r.globalCompositeOperation=l),c},n.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,t==0&&this._testMouseOver(!0)),t==null)t=20;else if(t<=0)return;var i=this;this._mouseOverIntervalID=setInterval(function(){i._testMouseOver()},1e3/Math.min(50,t))},n.enableDOMEvents=function(t){t==null&&(t=!0);var i,e,r=this._eventListeners;if(!t&&r){for(i in r)e=r[i],e.t.removeEventListener(i,e.f,!1);this._eventListeners=null}else if(t&&!r&&this.canvas){var a=window.addEventListener?window:document,u=this;r=this._eventListeners={},r.mouseup={t:a,f:function(l){u._handleMouseUp(l)}},r.mousemove={t:a,f:function(l){u._handleMouseMove(l)}},r.dblclick={t:this.canvas,f:function(l){u._handleDoubleClick(l)}},r.mousedown={t:this.canvas,f:function(l){u._handleMouseDown(l)}};for(i in r)e=r[i],e.t.addEventListener(i,e.f,!1)}},n.clone=function(){throw"Stage cannot be cloned."},n.toString=function(){return"[Stage (name="+this.name+")]"},n._getElementRect=function(t){var i;try{i=t.getBoundingClientRect()}catch{i={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var e=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),a=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,u=parseInt(a.paddingLeft)+parseInt(a.borderLeftWidth),l=parseInt(a.paddingTop)+parseInt(a.borderTopWidth),c=parseInt(a.paddingRight)+parseInt(a.borderRightWidth),d=parseInt(a.paddingBottom)+parseInt(a.borderBottomWidth);return{left:i.left+e+u,right:i.right+e-c,top:i.top+r+l,bottom:i.bottom+r-d}},n._getPointerData=function(t){var i=this._pointerData[t];return i||(i=this._pointerData[t]={x:0,y:0}),i},n._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},n._handlePointerMove=function(t,i,e,r,a){if(!(this._prevStage&&a===void 0)&&this.canvas){var u=this._nextStage,l=this._getPointerData(t),c=l.inBounds;this._updatePointerPosition(t,i,e,r),(c||l.inBounds||this.mouseMoveOutside)&&(t===-1&&l.inBounds==!c&&this._dispatchMouseEvent(this,c?"mouseleave":"mouseenter",!1,t,l,i),this._dispatchMouseEvent(this,"stagemousemove",!1,t,l,i),this._dispatchMouseEvent(l.target,"pressmove",!0,t,l,i)),u&&u._handlePointerMove(t,i,e,r,null)}},n._updatePointerPosition=function(t,i,e,r){var a=this._getElementRect(this.canvas);e-=a.left,r-=a.top;var u=this.canvas.width,l=this.canvas.height;e/=(a.right-a.left)/u,r/=(a.bottom-a.top)/l;var c=this._getPointerData(t);(c.inBounds=e>=0&&r>=0&&e<=u-1&&r<=l-1)?(c.x=e,c.y=r):this.mouseMoveOutside&&(c.x=e<0?0:e>u-1?u-1:e,c.y=r<0?0:r>l-1?l-1:r),c.posEvtObj=i,c.rawX=e,c.rawY=r,(t===this._primaryPointerID||t===-1)&&(this.mouseX=c.x,this.mouseY=c.y,this.mouseInBounds=c.inBounds)},n._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},n._handlePointerUp=function(t,i,e,r){var a=this._nextStage,u=this._getPointerData(t);if(!(this._prevStage&&r===void 0)){var l=null,c=u.target;!r&&(c||a)&&(l=this._getObjectsUnderPoint(u.x,u.y,null,!0)),u.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,u,i,l),u.down=!1),l==c&&this._dispatchMouseEvent(c,"click",!0,t,u,i),this._dispatchMouseEvent(c,"pressup",!0,t,u,i),e?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):u.target=null,a&&a._handlePointerUp(t,i,e,r||l&&this)}},n._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},n._handlePointerDown=function(t,i,e,r,a){this.preventSelection&&i.preventDefault(),(this._primaryPointerID==null||t===-1)&&(this._primaryPointerID=t),r!=null&&this._updatePointerPosition(t,i,e,r);var u=null,l=this._nextStage,c=this._getPointerData(t);a||(u=c.target=this._getObjectsUnderPoint(c.x,c.y,null,!0)),c.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,c,i,u),c.down=!0),this._dispatchMouseEvent(u,"mousedown",!0,t,c,i),l&&l._handlePointerDown(t,i,e,r,a||u&&this)},n._testMouseOver=function(t,i,e){if(!(this._prevStage&&i===void 0)){var r=this._nextStage;if(!this._mouseOverIntervalID){r&&r._testMouseOver(t,i,e);return}var a=this._getPointerData(-1);if(!(!a||!t&&this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var u=a.posEvtObj,l=e||u&&u.target==this.canvas,c=null,d=-1,f="",_,p,v;!i&&(t||this.mouseInBounds&&l)&&(c=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var g=this._mouseOverTarget||[],E=g[g.length-1],w=this._mouseOverTarget=[];for(_=c;_;)w.unshift(_),f||(f=_.cursor),_=_.parent;for(this.canvas.style.cursor=f,!i&&e&&(e.canvas.style.cursor=f),p=0,v=w.length;p<v&&w[p]==g[p];p++)d=p;for(E!=c&&this._dispatchMouseEvent(E,"mouseout",!0,-1,a,u,c),p=g.length-1;p>d;p--)this._dispatchMouseEvent(g[p],"rollout",!1,-1,a,u,c);for(p=w.length-1;p>d;p--)this._dispatchMouseEvent(w[p],"rollover",!1,-1,a,u,E);E!=c&&this._dispatchMouseEvent(c,"mouseover",!0,-1,a,u,E),r&&r._testMouseOver(t,i||c&&this,e||l&&this)}}},n._handleDoubleClick=function(t,i){var e=null,r=this._nextStage,a=this._getPointerData(-1);i||(e=this._getObjectsUnderPoint(a.x,a.y,null,!0),this._dispatchMouseEvent(e,"dblclick",!0,-1,a,t)),r&&r._handleDoubleClick(t,i||e&&this)},n._dispatchMouseEvent=function(t,i,e,r,a,u,l){if(!(!t||!e&&!t.hasEventListener(i))){var c=new h.MouseEvent(i,e,!1,a.x,a.y,u,r,r===this._primaryPointerID||r===-1,a.rawX,a.rawY,l);t.dispatchEvent(c)}},h.Stage=h.promote(o,"Container")}(),function(){function o(t){this.DisplayObject_constructor(),typeof t=="string"?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var n=h.extend(o,h.DisplayObject);n.initialize=o,n.isVisible=function(){var t=this.image,i=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&i)},n.draw=function(t,i){if(this.DisplayObject_draw(t,i)||!this.image)return!0;var e=this.image,r=this.sourceRect;if(r){var a=r.x,u=r.y,l=a+r.width,c=u+r.height,d=0,f=0,_=e.width,p=e.height;a<0&&(d-=a,a=0),l>_&&(l=_),u<0&&(f-=u,u=0),c>p&&(c=p),t.drawImage(e,a,u,l-a,c-u,d,f,l-a,c-u)}else t.drawImage(e,0,0);return!0},n.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var i=this.image,e=this.sourceRect||i,r=i&&(i.naturalWidth||i.getContext||i.readyState>=2);return r?this._rectangle.setValues(0,0,e.width,e.height):null},n.clone=function(){var t=new o(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},n.toString=function(){return"[Bitmap (name="+this.name+")]"},h.Bitmap=h.promote(o,"DisplayObject")}(),function(){function o(t,i){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,i!=null&&this.gotoAndPlay(i)}var n=h.extend(o,h.DisplayObject);n.initialize=o,n.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},n.draw=function(t,i){if(this.DisplayObject_draw(t,i))return!0;this._normalizeFrame();var e=this.spriteSheet.getFrame(this._currentFrame|0);if(!e)return!1;var r=e.rect;return r.width&&r.height&&t.drawImage(e.image,r.x,r.y,r.width,r.height,-e.regX,-e.regY,r.width,r.height),!0},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},n.gotoAndStop=function(t){this.paused=!0,this._goto(t)},n.advance=function(t){var i=this.framerate||this.spriteSheet.framerate,e=i&&t!=null?t/(1e3/i):1;this._normalizeFrame(e)},n.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},n.clone=function(){return this._cloneProps(new o(this.spriteSheet))},n.toString=function(){return"[Sprite (name="+this.name+")]"},n._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},n._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},n._normalizeFrame=function(t){t=t||0;var i=this._animation,e=this.paused,r=this._currentFrame,a;if(i){var u=i.speed||1,l=this.currentAnimationFrame;if(a=i.frames.length,l+t*u>=a){var c=i.next;if(this._dispatchAnimationEnd(i,r,e,c,a-1))return;if(c)return this._goto(c,t-(a-l)/u);this.paused=!0,l=i.frames.length-1}else l+=t*u;this.currentAnimationFrame=l,this._currentFrame=i.frames[l|0]}else if(r=this._currentFrame+=t,a=this.spriteSheet.getNumFrames(),r>=a&&a>0&&!this._dispatchAnimationEnd(i,r,e,a-1)&&(this._currentFrame-=a)>=a)return this._normalizeFrame();r=this._currentFrame|0,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))},n._dispatchAnimationEnd=function(t,i,e,r,a){var u=t?t.name:null;if(this.hasEventListener("animationend")){var l=new h.Event("animationend");l.name=u,l.next=r,this.dispatchEvent(l)}var c=this._animation!=t||this._currentFrame!=i;return!c&&!e&&this.paused&&(this.currentAnimationFrame=a,c=!0),c},n._goto=function(t,i){if(this.currentAnimationFrame=0,isNaN(t)){var e=this.spriteSheet.getAnimation(t);e&&(this._animation=e,this.currentAnimation=t,this._normalizeFrame(i))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},h.Sprite=h.promote(o,"DisplayObject")}(),function(){function o(t){this.DisplayObject_constructor(),this.graphics=t||new h.Graphics}var n=h.extend(o,h.DisplayObject);n.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},n.draw=function(t,i){return this.DisplayObject_draw(t,i)||this.graphics.draw(t,this),!0},n.clone=function(t){var i=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new o(i))},n.toString=function(){return"[Shape (name="+this.name+")]"},h.Shape=h.promote(o,"DisplayObject")}(),function(){function o(i,e,r){this.DisplayObject_constructor(),this.text=i,this.font=e,this.color=r,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var n=h.extend(o,h.DisplayObject),t=h.createCanvas?h.createCanvas():document.createElement("canvas");t.getContext&&(o._workingContext=t.getContext("2d"),t.width=t.height=1),o.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},o.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},n.isVisible=function(){var i=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&i)},n.draw=function(i,e){if(this.DisplayObject_draw(i,e))return!0;var r=this.color||"#000";return this.outline?(i.strokeStyle=r,i.lineWidth=this.outline*1):i.fillStyle=r,this._drawText(this._prepContext(i)),!0},n.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},n.getMeasuredLineHeight=function(){return this._getMeasuredWidth("M")*1.2},n.getMeasuredHeight=function(){return this._drawText(null,{}).height},n.getBounds=function(){var i=this.DisplayObject_getBounds();if(i)return i;if(this.text==null||this.text==="")return null;var e=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<e.width?this.maxWidth:e.width,a=r*o.H_OFFSETS[this.textAlign||"left"],u=this.lineHeight||this.getMeasuredLineHeight(),l=u*o.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(a,l,r,e.height)},n.getMetrics=function(){var i={lines:[]};return i.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),i.vOffset=i.lineHeight*o.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,i,i.lines)},n.clone=function(){return this._cloneProps(new o(this.text,this.font,this.color))},n.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},n._cloneProps=function(i){return this.DisplayObject__cloneProps(i),i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,i.maxWidth=this.maxWidth,i.outline=this.outline,i.lineHeight=this.lineHeight,i.lineWidth=this.lineWidth,i},n._prepContext=function(i){return i.font=this.font||"10px sans-serif",i.textAlign=this.textAlign||"left",i.textBaseline=this.textBaseline||"top",i},n._drawText=function(i,e,r){var a=!!i;a||(i=o._workingContext,i.save(),this._prepContext(i));for(var u=this.lineHeight||this.getMeasuredLineHeight(),l=0,c=0,d=String(this.text).split(/(?:\r\n|\r|\n)/),f=0,_=d.length;f<_;f++){var p=d[f],v=null;if(this.lineWidth!=null&&(v=i.measureText(p).width)>this.lineWidth){var g=p.split(/(\s)/);p=g[0],v=i.measureText(p).width;for(var E=1,w=g.length;E<w;E+=2){var R=i.measureText(g[E]+g[E+1]).width;v+R>this.lineWidth?(a&&this._drawTextLine(i,p,c*u),r&&r.push(p),v>l&&(l=v),p=g[E+1],v=i.measureText(p).width,c++):(p+=g[E]+g[E+1],v+=R)}}a&&this._drawTextLine(i,p,c*u),r&&r.push(p),e&&v==null&&(v=i.measureText(p).width),v>l&&(l=v),c++}return e&&(e.width=l,e.height=c*u),a||i.restore(),e},n._drawTextLine=function(i,e,r){this.outline?i.strokeText(e,0,r,this.maxWidth||65535):i.fillText(e,0,r,this.maxWidth||65535)},n._getMeasuredWidth=function(i){var e=o._workingContext;e.save();var r=this._prepContext(e).measureText(i).width;return e.restore(),r},h.Text=h.promote(o,"DisplayObject")}(),function(){function o(t,i){this.Container_constructor(),this.text=t||"",this.spriteSheet=i,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var n=h.extend(o,h.Container);o.maxPoolSize=100,o._spritePool=[],n.draw=function(t,i){this.DisplayObject_draw(t,i)||(this._updateText(),this.Container_draw(t,i))},n.getBounds=function(){return this._updateText(),this.Container_getBounds()},n.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&this.scaleX!==0&&this.scaleY!==0&&t)},n.clone=function(){return this._cloneProps(new o(this.text,this.spriteSheet))},n.addChild=n.addChildAt=n.removeChild=n.removeChildAt=n.removeAllChildren=function(){},n._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},n._getFrameIndex=function(t,i){var e,r=i.getAnimation(t);return r||(t!=(e=t.toUpperCase())||t!=(e=t.toLowerCase())||(e=null),e&&(r=i.getAnimation(e))),r&&r.frames[0]},n._getFrame=function(t,i){var e=this._getFrameIndex(t,i);return e==null?e:i.getFrame(e)},n._getLineHeight=function(t){var i=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return i?i.rect.height:1},n._getSpaceWidth=function(t){var i=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return i?i.rect.width:1},n._updateText=function(){var t=0,i=0,e=this._oldProps,r=!1,a=this.spaceWidth,u=this.lineHeight,l=this.spriteSheet,c=o._spritePool,d=this.children,f=0,_=d.length,p;for(var v in e)e[v]!=this[v]&&(e[v]=this[v],r=!0);if(r){var g=!!this._getFrame(" ",l);!g&&!a&&(a=this._getSpaceWidth(l)),u||(u=this._getLineHeight(l));for(var E=0,w=this.text.length;E<w;E++){var R=this.text.charAt(E);if(R==" "&&!g){t+=a;continue}else if(R==`
`||R=="\r"){R=="\r"&&this.text.charAt(E+1)==`
`&&E++,t=0,i+=u;continue}var M=this._getFrameIndex(R,l);M!=null&&(f<_?p=d[f]:(d.push(p=c.length?c.pop():new h.Sprite),p.parent=this,_++),p.spriteSheet=l,p.gotoAndStop(M),p.x=t,p.y=i,f++,t+=p.getBounds().width+this.letterSpacing)}for(;_>f;)c.push(p=d.pop()),p.parent=null,_--;c.length>o.maxPoolSize&&(c.length=o.maxPoolSize)}},h.BitmapText=h.promote(o,"Container")}(),function(){function o(i,e,r,a){this.Container_constructor(),!o.inited&&o.init(),this.mode=i||o.INDEPENDENT,this.startPosition=e||0,this.loop=r,this.currentFrame=0,this.timeline=new h.Timeline(null,a,{paused:!0,position:e,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}var n=h.extend(o,h.Container);o.INDEPENDENT="independent",o.SINGLE_FRAME="single",o.SYNCHED="synched",o.inited=!1,o.init=function(){o.inited||(t.install(),o.inited=!0)},n.getLabels=function(){return this.timeline.getLabels()},n.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},n.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(n,{labels:{get:n.getLabels},currentLabel:{get:n.getCurrentLabel},totalFrames:{get:n.getDuration},duration:{get:n.getDuration}})}catch{}n.initialize=o,n.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},n.draw=function(i,e){return this.DisplayObject_draw(i,e)||(this._updateTimeline(),this.Container_draw(i,e)),!0},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(i){this.paused=!1,this._goto(i)},n.gotoAndStop=function(i){this.paused=!0,this._goto(i)},n.advance=function(i){var e=o.INDEPENDENT;if(this.mode==e){for(var r=this,a=r.framerate;(r=r.parent)&&a==null;)r.mode==e&&(a=r._framerate);this._framerate=a;var u=a!=null&&a!=-1&&i!=null?i/(1e3/a)+this._t:1,l=u|0;for(this._t=u-l;!this.paused&&l--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},n.clone=function(){throw"MovieClip cannot be cloned."},n.toString=function(){return"[MovieClip (name="+this.name+")]"},n._tick=function(i){this.advance(i&&i.delta),this.Container__tick(i)},n._goto=function(i){var e=this.timeline.resolve(i);e!=null&&(this._prevPos==-1&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},n._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},n._updateTimeline=function(){var i=this.timeline,e=this.mode!=o.INDEPENDENT;i.loop=this.loop==null?!0:this.loop;var r=e?this.startPosition+(this.mode==o.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,a=e||!this.actionsEnabled?h.Tween.NONE:null;if(this.currentFrame=i._calcPosition(r),i.setPosition(r,a),this._prevPosition=i._prevPosition,this._prevPos!=i._prevPos){this.currentFrame=this._prevPos=i._prevPos;for(var u in this._managed)this._managed[u]=1;for(var l=i._tweens,c=0,d=l.length;c<d;c++){var f=l[c],_=f._target;if(!(_==this||f.passive)){var p=f._stepPosition;_ instanceof h.DisplayObject?this._addManagedChild(_,p):this._setState(_.state,p)}}var v=this.children;for(c=v.length-1;c>=0;c--){var g=v[c].id;this._managed[g]==1&&(this.removeChildAt(c),delete this._managed[g])}}},n._setState=function(i,e){if(i)for(var r=i.length-1;r>=0;r--){var a=i[r],u=a.t,l=a.p;for(var c in l)u[c]=l[c];this._addManagedChild(u,e)}},n._addManagedChild=function(i,e){i._off||(this.addChildAt(i,0),i instanceof o&&(i._synchOffset=e,i.mode==o.INDEPENDENT&&i.autoReset&&!this._managed[i.id]&&i._reset()),this._managed[i.id]=2)},n._getBounds=function(i,e){var r=this.DisplayObject_getBounds();return r||(this._updateTimeline(),this.frameBounds&&(r=this._rectangle.copy(this.frameBounds[this.currentFrame]))),r?this._transformBounds(r,i,e):this.Container__getBounds(i,e)},h.MovieClip=h.promote(o,"Container");function t(){throw"MovieClipPlugin cannot be instantiated."}t.priority=100,t.install=function(){h.Tween.installPlugin(t,["startPosition"])},t.init=function(i,e,r){return r},t.step=function(){},t.tween=function(i,e,r,a,u,l,c,d){return i.target instanceof o?l==1?u[e]:a[e]:r}}(),function(){function o(){throw"SpriteSheetUtils cannot be instantiated"}var n=h.createCanvas?h.createCanvas():document.createElement("canvas");n.getContext&&(o._workingCanvas=n,o._workingContext=n.getContext("2d"),n.width=n.height=1),o.addFlippedFrames=function(t,i,e,r){if(!(!i&&!e&&!r)){var a=0;i&&o._flip(t,++a,!0,!1),e&&o._flip(t,++a,!1,!0),r&&o._flip(t,++a,!0,!0)}},o.extractFrame=function(t,i){isNaN(i)&&(i=t.getAnimation(i).frames[0]);var e=t.getFrame(i);if(!e)return null;var r=e.rect,a=o._workingCanvas;a.width=r.width,a.height=r.height,o._workingContext.drawImage(e.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var u=document.createElement("img");return u.src=a.toDataURL("image/png"),u},o.mergeAlpha=function(t,i,e){e||(e=h.createCanvas?h.createCanvas():document.createElement("canvas")),e.width=Math.max(i.width,t.width),e.height=Math.max(i.height,t.height);var r=e.getContext("2d");return r.save(),r.drawImage(t,0,0),r.globalCompositeOperation="destination-in",r.drawImage(i,0,0),r.restore(),e},o._flip=function(t,i,e,r){for(var a=t._images,u=o._workingCanvas,l=o._workingContext,c=a.length/i,d=0;d<c;d++){var f=a[d];f.__tmp=d,l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,u.width+1,u.height+1),u.width=f.width,u.height=f.height,l.setTransform(e?-1:1,0,0,r?-1:1,e?f.width:0,r?f.height:0),l.drawImage(f,0,0);var _=document.createElement("img");_.src=u.toDataURL("image/png"),_.width=f.width,_.height=f.height,a.push(_)}var p=t._frames,v=p.length/i;for(d=0;d<v;d++){f=p[d];var g=f.rect.clone();_=a[f.image.__tmp+c*i];var E={image:_,rect:g,regX:f.regX,regY:f.regY};e&&(g.x=_.width-g.x-g.width,E.regX=g.width-f.regX),r&&(g.y=_.height-g.y-g.height,E.regY=g.height-f.regY),p.push(E)}var w="_"+(e?"h":"")+(r?"v":""),R=t._animations,M=t._data,x=R.length/i;for(d=0;d<x;d++){var C=R[d];f=M[C];var N={name:C+w,speed:f.speed,next:f.next,frames:[]};f.next&&(N.next+=w),p=f.frames;for(var V=0,k=p.length;V<k;V++)N.frames.push(p[V]+v*i);M[N.name]=N,R.push(N.name)}},h.SpriteSheetUtils=o}(),function(){function o(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var n=h.extend(o,h.EventDispatcher);o.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",o.ERR_RUNNING="a build is already running",n.addFrame=function(t,i,e,r,a){if(this._data)throw o.ERR_RUNNING;var u=i||t.bounds||t.nominalBounds;return!u&&t.getBounds&&(u=t.getBounds()),u?(e=e||1,this._frames.push({source:t,sourceRect:u,scale:e,funct:r,data:a,index:this._frames.length,height:u.height*e})-1):null},n.addAnimation=function(t,i,e,r){if(this._data)throw o.ERR_RUNNING;this._animations[t]={frames:i,next:e,speed:r}},n.addMovieClip=function(t,i,e,r,a,u){if(this._data)throw o.ERR_RUNNING;var l=t.frameBounds,c=i||t.bounds||t.nominalBounds;if(!c&&t.getBounds&&(c=t.getBounds()),!(!c&&!l)){var d,f,_=this._frames.length,p=t.timeline.duration;for(d=0;d<p;d++){var v=l&&l[d]?l[d]:c;this.addFrame(t,v,e,this._setupMovieClipFrame,{i:d,f:r,d:a})}var g=t.timeline._labels,E=[];for(var w in g)E.push({index:g[w],label:w});if(E.length)for(E.sort(function(V,k){return V.index-k.index}),d=0,f=E.length;d<f;d++){for(var R=E[d].label,M=_+E[d].index,x=_+(d==f-1?p:E[d+1].index),C=[],N=M;N<x;N++)C.push(N);u&&(R=u(R,t,M,x),!R)||this.addAnimation(R,C,!0)}}},n.build=function(){if(this._data)throw o.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},n.buildAsync=function(t){if(this._data)throw o.ERR_RUNNING;this.timeSlice=t,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-Math.max(.01,Math.min(.99,this.timeSlice||.3))*50)},n.stopAsync=function(){clearTimeout(this._timerID),this._data=null},n.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},n.toString=function(){return"[SpriteSheetBuilder]"},n._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,framerate:this.framerate,animations:this._animations};var e=this._frames.slice();if(e.sort(function(d,f){return d.height<=f.height?-1:1}),e[e.length-1].height+t*2>this.maxHeight)throw o.ERR_DIMENSIONS;for(var r=0,a=0,u=0;e.length;){var l=this._fillRow(e,r,u,i,t);if(l.w>a&&(a=l.w),r+=l.h,!l.h||!e.length){var c=h.createCanvas?h.createCanvas():document.createElement("canvas");c.width=this._getSize(a,this.maxWidth),c.height=this._getSize(r,this.maxHeight),this._data.images[u]=c,l.h||(a=r=0,u++)}}},n._setupMovieClipFrame=function(t,i){var e=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(i.i),t.actionsEnabled=e,i.f&&i.f(t,i.d,i.i)},n._getSize=function(t,i){for(var e=4;Math.pow(2,++e)<t;);return Math.min(i,Math.pow(2,e))},n._fillRow=function(t,i,e,r,a){var u=this.maxWidth,l=this.maxHeight;i+=a;for(var c=l-i,d=a,f=0,_=t.length-1;_>=0;_--){var p=t[_],v=this._scale*p.scale,g=p.sourceRect,E=p.source,w=Math.floor(v*g.x-a),R=Math.floor(v*g.y-a),M=Math.ceil(v*g.height+a*2),x=Math.ceil(v*g.width+a*2);if(x>u)throw o.ERR_DIMENSIONS;M>c||d+x>u||(p.img=e,p.rect=new h.Rectangle(d,i,x,M),f=f||M,t.splice(_,1),r[p.index]=[d,i,x,M,e,Math.round(-w+v*E.regX-a),Math.round(-R+v*E.regY-a)],d+=x)}return{w:d,h:f}},n._endBuild=function(){this.spriteSheet=new h.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},n._run=function(){for(var t=Math.max(.01,Math.min(.99,this.timeSlice||.3))*50,i=new Date().getTime()+t,e=!1;i>new Date().getTime();)if(!this._drawNext()){e=!0;break}if(e)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-t)}var a=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var u=new h.Event("progress");u.progress=a,this.dispatchEvent(u)}},n._drawNext=function(){var t=this._frames[this._index],i=t.scale*this._scale,e=t.rect,r=t.sourceRect,a=this._data.images[t.img],u=a.getContext("2d");return t.funct&&t.funct(t.source,t.data),u.save(),u.beginPath(),u.rect(e.x,e.y,e.width,e.height),u.clip(),u.translate(Math.ceil(e.x-r.x*i),Math.ceil(e.y-r.y*i)),u.scale(i,i),t.source.draw(u),u.restore(),++this._index<this._frames.length},h.SpriteSheetBuilder=h.promote(o,"EventDispatcher")}(),function(){function o(t){this.DisplayObject_constructor(),typeof t=="string"&&(t=document.getElementById(t)),this.mouseEnabled=!1;var i=t.style;i.position="absolute",i.transformOrigin=i.WebkitTransformOrigin=i.msTransformOrigin=i.MozTransformOrigin=i.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var n=h.extend(o,h.DisplayObject);n.isVisible=function(){return this.htmlElement!=null},n.draw=function(t,i){return!0},n.cache=function(){},n.uncache=function(){},n.updateCache=function(){},n.hitTest=function(){},n.localToGlobal=function(){},n.globalToLocal=function(){},n.localToLocal=function(){},n.clone=function(){throw"DOMElement cannot be cloned."},n.toString=function(){return"[DOMElement (name="+this.name+")]"},n._tick=function(t){var i=this.getStage();i&&i.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},n._handleDrawEnd=function(t){var i=this.htmlElement;if(i){var e=i.style,r=this.getConcatenatedDisplayProps(this._props),a=r.matrix,u=r.visible?"visible":"hidden";if(u!=e.visibility&&(e.visibility=u),!!r.visible){var l=this._oldProps,c=l&&l.matrix,d=1e4;if(!c||!c.equals(a)){var f="matrix("+(a.a*d|0)/d+","+(a.b*d|0)/d+","+(a.c*d|0)/d+","+(a.d*d|0)/d+","+(a.tx+.5|0);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=f+","+(a.ty+.5|0)+")",e.MozTransform=f+"px,"+(a.ty+.5|0)+"px)",l||(l=this._oldProps=new h.DisplayProps(!0,NaN)),l.matrix.copy(a)}l.alpha!=r.alpha&&(e.opacity=""+(r.alpha*d|0)/d,l.alpha=r.alpha)}}},h.DOMElement=h.promote(o,"DisplayObject")}(),function(){function o(){}var n=o.prototype;n.getBounds=function(t){return t},n.applyFilter=function(t,i,e,r,a,u,l,c){u=u||t,l==null&&(l=i),c==null&&(c=e);try{var d=t.getImageData(i,e,r,a)}catch{return!1}return this._applyFilter(d)?(u.putImageData(d,l,c),!0):!1},n.toString=function(){return"[Filter]"},n.clone=function(){return new o},n._applyFilter=function(t){return!0},h.Filter=o}(),function(){function o(t,i,e){(isNaN(t)||t<0)&&(t=0),(isNaN(i)||i<0)&&(i=0),(isNaN(e)||e<1)&&(e=1),this.blurX=t|0,this.blurY=i|0,this.quality=e|0}var n=h.extend(o,h.Filter);o.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],o.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],n.getBounds=function(t){var i=this.blurX|0,e=this.blurY|0;if(i<=0&&e<=0)return t;var r=Math.pow(this.quality,.2);return(t||new h.Rectangle).pad(i*r+1,e*r+1,i*r+1,e*r+1)},n.clone=function(){return new o(this.blurX,this.blurY,this.quality)},n.toString=function(){return"[BlurFilter]"},n._applyFilter=function(t){var i=this.blurX>>1;if(isNaN(i)||i<0)return!1;var e=this.blurY>>1;if(isNaN(e)||e<0||i==0&&e==0)return!1;var r=this.quality;(isNaN(r)||r<1)&&(r=1),r|=0,r>3&&(r=3),r<1&&(r=1);var a=t.data,u=0,l=0,c=0,d=0,f=0,_=0,p=0,v=0,g=0,E=0,w=0,R=0,M=0,x=0,C=0,N=i+i+1|0,V=e+e+1|0,k=t.width|0,H=t.height|0,B=k-1|0,J=H-1|0,tt=i+1|0,K=e+1|0,Y={r:0,b:0,g:0,a:0},j=Y;for(c=1;c<N;c++)j=j.n={r:0,b:0,g:0,a:0};j.n=Y;var at={r:0,b:0,g:0,a:0},G=at;for(c=1;c<V;c++)G=G.n={r:0,b:0,g:0,a:0};G.n=at;for(var I=null,_t=o.MUL_TABLE[i]|0,rt=o.SHG_TABLE[i]|0,pt=o.MUL_TABLE[e]|0,vt=o.SHG_TABLE[e]|0;r-- >0;){p=_=0;var q=_t,z=rt;for(l=H;--l>-1;){for(v=tt*(R=a[_|0]),g=tt*(M=a[_+1|0]),E=tt*(x=a[_+2|0]),w=tt*(C=a[_+3|0]),j=Y,c=tt;--c>-1;)j.r=R,j.g=M,j.b=x,j.a=C,j=j.n;for(c=1;c<tt;c++)d=_+((B<c?B:c)<<2)|0,v+=j.r=a[d],g+=j.g=a[d+1],E+=j.b=a[d+2],w+=j.a=a[d+3],j=j.n;for(I=Y,u=0;u<k;u++)a[_++]=v*q>>>z,a[_++]=g*q>>>z,a[_++]=E*q>>>z,a[_++]=w*q>>>z,d=p+((d=u+i+1)<B?d:B)<<2,v-=I.r-(I.r=a[d]),g-=I.g-(I.g=a[d+1]),E-=I.b-(I.b=a[d+2]),w-=I.a-(I.a=a[d+3]),I=I.n;p+=k}for(q=pt,z=vt,u=0;u<k;u++){for(_=u<<2|0,v=K*(R=a[_])|0,g=K*(M=a[_+1|0])|0,E=K*(x=a[_+2|0])|0,w=K*(C=a[_+3|0])|0,G=at,c=0;c<K;c++)G.r=R,G.g=M,G.b=x,G.a=C,G=G.n;for(f=k,c=1;c<=e;c++)_=f+u<<2,v+=G.r=a[_],g+=G.g=a[_+1],E+=G.b=a[_+2],w+=G.a=a[_+3],G=G.n,c<J&&(f+=k);if(_=u,I=at,r>0)for(l=0;l<H;l++)d=_<<2,a[d+3]=C=w*q>>>z,C>0?(a[d]=v*q>>>z,a[d+1]=g*q>>>z,a[d+2]=E*q>>>z):a[d]=a[d+1]=a[d+2]=0,d=u+((d=l+K)<J?d:J)*k<<2,v-=I.r-(I.r=a[d]),g-=I.g-(I.g=a[d+1]),E-=I.b-(I.b=a[d+2]),w-=I.a-(I.a=a[d+3]),I=I.n,_+=k;else for(l=0;l<H;l++)d=_<<2,a[d+3]=C=w*q>>>z,C>0?(C=255/C,a[d]=(v*q>>>z)*C,a[d+1]=(g*q>>>z)*C,a[d+2]=(E*q>>>z)*C):a[d]=a[d+1]=a[d+2]=0,d=u+((d=l+K)<J?d:J)*k<<2,v-=I.r-(I.r=a[d]),g-=I.g-(I.g=a[d+1]),E-=I.b-(I.b=a[d+2]),w-=I.a-(I.a=a[d+3]),I=I.n,_+=k}}return!0},h.BlurFilter=h.promote(o,"Filter")}(),function(){function o(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var n=h.extend(o,h.Filter);n.clone=function(){var t=new o(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},n.toString=function(){return"[AlphaMapFilter]"},n._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var i=t.data,e=this._mapData,r=0,a=i.length;r<a;r+=4)i[r+3]=e[r]||0;return!0},n._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t=this._alphaMap=this.alphaMap,i=t,e;t instanceof HTMLCanvasElement?e=i.getContext("2d"):(i=h.createCanvas?h.createCanvas():document.createElement("canvas"),i.width=t.width,i.height=t.height,e=i.getContext("2d"),e.drawImage(t,0,0));try{var r=e.getImageData(0,0,t.width,t.height)}catch{return!1}return this._mapData=r.data,!0},h.AlphaMapFilter=h.promote(o,"Filter")}(),function(){function o(t){this.mask=t}var n=h.extend(o,h.Filter);n.applyFilter=function(t,i,e,r,a,u,l,c){return this.mask?(u=u||t,l==null&&(l=i),c==null&&(c=e),u.save(),t!=u?!1:(u.globalCompositeOperation="destination-in",u.drawImage(this.mask,l,c),u.restore(),!0)):!0},n.clone=function(){return new o(this.mask)},n.toString=function(){return"[AlphaMaskFilter]"},h.AlphaMaskFilter=h.promote(o,"Filter")}(),function(){function o(t,i,e,r,a,u,l,c){this.redMultiplier=t??1,this.greenMultiplier=i??1,this.blueMultiplier=e??1,this.alphaMultiplier=r??1,this.redOffset=a||0,this.greenOffset=u||0,this.blueOffset=l||0,this.alphaOffset=c||0}var n=h.extend(o,h.Filter);n.toString=function(){return"[ColorFilter]"},n.clone=function(){return new o(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},n._applyFilter=function(t){for(var i=t.data,e=i.length,r=0;r<e;r+=4)i[r]=i[r]*this.redMultiplier+this.redOffset,i[r+1]=i[r+1]*this.greenMultiplier+this.greenOffset,i[r+2]=i[r+2]*this.blueMultiplier+this.blueOffset,i[r+3]=i[r+3]*this.alphaMultiplier+this.alphaOffset;return!0},h.ColorFilter=h.promote(o,"Filter")}(),function(){function o(t,i,e,r){this.setColor(t,i,e,r)}var n=o.prototype;o.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],o.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],o.LENGTH=o.IDENTITY_MATRIX.length,n.setColor=function(t,i,e,r){return this.reset().adjustColor(t,i,e,r)},n.reset=function(){return this.copy(o.IDENTITY_MATRIX)},n.adjustColor=function(t,i,e,r){return this.adjustHue(r),this.adjustContrast(i),this.adjustBrightness(t),this.adjustSaturation(e)},n.adjustBrightness=function(t){return t==0||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},n.adjustContrast=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var i;return t<0?i=127+t/100*127:(i=t%1,i==0?i=o.DELTA_INDEX[t]:i=o.DELTA_INDEX[t<<0]*(1-i)+o.DELTA_INDEX[(t<<0)+1]*i,i=i*127+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},n.adjustSaturation=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var i=1+(t>0?3*t/100:t/100),e=.3086,r=.6094,a=.082;return this._multiplyMatrix([e*(1-i)+i,r*(1-i),a*(1-i),0,0,e*(1-i),r*(1-i)+i,a*(1-i),0,0,e*(1-i),r*(1-i),a*(1-i)+i,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.adjustHue=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var i=Math.cos(t),e=Math.sin(t),r=.213,a=.715,u=.072;return this._multiplyMatrix([r+i*(1-r)+e*-r,a+i*-a+e*-a,u+i*-u+e*(1-u),0,0,r+i*-r+e*.143,a+i*(1-a)+e*.14,u+i*-u+e*-.283,0,0,r+i*-r+e*-(1-r),a+i*-a+e*a,u+i*(1-u)+e*u,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.concat=function(t){return t=this._fixMatrix(t),t.length!=o.LENGTH?this:(this._multiplyMatrix(t),this)},n.clone=function(){return new o().copy(this)},n.toArray=function(){for(var t=[],i=0,e=o.LENGTH;i<e;i++)t[i]=this[i];return t},n.copy=function(t){for(var i=o.LENGTH,e=0;e<i;e++)this[e]=t[e];return this},n.toString=function(){return"[ColorMatrix]"},n._multiplyMatrix=function(t){var i,e,r,a=[];for(i=0;i<5;i++){for(e=0;e<5;e++)a[e]=this[e+i*5];for(e=0;e<5;e++){var u=0;for(r=0;r<5;r++)u+=t[e+r*5]*a[r];this[e+i*5]=u}}},n._cleanValue=function(t,i){return Math.min(i,Math.max(-i,t))},n._fixMatrix=function(t){return t instanceof o&&(t=t.toArray()),t.length<o.LENGTH?t=t.slice(0,t.length).concat(o.IDENTITY_MATRIX.slice(t.length,o.LENGTH)):t.length>o.LENGTH&&(t=t.slice(0,o.LENGTH)),t},h.ColorMatrix=o}(),function(){function o(t){this.matrix=t}var n=h.extend(o,h.Filter);n.toString=function(){return"[ColorMatrixFilter]"},n.clone=function(){return new o(this.matrix)},n._applyFilter=function(t){for(var i=t.data,e=i.length,r,a,u,l,c=this.matrix,d=c[0],f=c[1],_=c[2],p=c[3],v=c[4],g=c[5],E=c[6],w=c[7],R=c[8],M=c[9],x=c[10],C=c[11],N=c[12],V=c[13],k=c[14],H=c[15],B=c[16],J=c[17],tt=c[18],K=c[19],Y=0;Y<e;Y+=4)r=i[Y],a=i[Y+1],u=i[Y+2],l=i[Y+3],i[Y]=r*d+a*f+u*_+l*p+v,i[Y+1]=r*g+a*E+u*w+l*R+M,i[Y+2]=r*x+a*C+u*N+l*V+k,i[Y+3]=r*H+a*B+u*J+l*tt+K;return!0},h.ColorMatrixFilter=h.promote(o,"Filter")}(),function(){function o(){throw"Touch cannot be instantiated"}o.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},o.enable=function(n,t,i){return!n||!n.canvas||!o.isSupported()?!1:(n.__touch||(n.__touch={pointers:{},multitouch:!t,preventDefault:!i,count:0},"ontouchstart"in window?o._IOS_enable(n):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&o._IE_enable(n)),!0)},o.disable=function(n){n&&("ontouchstart"in window?o._IOS_disable(n):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&o._IE_disable(n),delete n.__touch)},o._IOS_enable=function(n){var t=n.canvas,i=n.__touch.f=function(e){o._IOS_handleEvent(n,e)};t.addEventListener("touchstart",i,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("touchcancel",i,!1)},o._IOS_disable=function(n){var t=n.canvas;if(t){var i=n.__touch.f;t.removeEventListener("touchstart",i,!1),t.removeEventListener("touchmove",i,!1),t.removeEventListener("touchend",i,!1),t.removeEventListener("touchcancel",i,!1)}},o._IOS_handleEvent=function(n,t){if(n){n.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var i=t.changedTouches,e=t.type,r=0,a=i.length;r<a;r++){var u=i[r],l=u.identifier;u.target==n.canvas&&(e=="touchstart"?this._handleStart(n,l,t,u.pageX,u.pageY):e=="touchmove"?this._handleMove(n,l,t,u.pageX,u.pageY):(e=="touchend"||e=="touchcancel")&&this._handleEnd(n,l,t))}}},o._IE_enable=function(n){var t=n.canvas,i=n.__touch.f=function(e){o._IE_handleEvent(n,e)};window.navigator.pointerEnabled===void 0?(t.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),n.__touch.preventDefault&&(t.style.msTouchAction="none")):(t.addEventListener("pointerdown",i,!1),window.addEventListener("pointermove",i,!1),window.addEventListener("pointerup",i,!1),window.addEventListener("pointercancel",i,!1),n.__touch.preventDefault&&(t.style.touchAction="none")),n.__touch.activeIDs={}},o._IE_disable=function(n){var t=n.__touch.f;window.navigator.pointerEnabled===void 0?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),n.canvas&&n.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),n.canvas&&n.canvas.removeEventListener("pointerdown",t,!1))},o._IE_handleEvent=function(n,t){if(n){n.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var i=t.type,e=t.pointerId,r=n.__touch.activeIDs;if(i=="MSPointerDown"||i=="pointerdown"){if(t.srcElement!=n.canvas)return;r[e]=!0,this._handleStart(n,e,t,t.pageX,t.pageY)}else r[e]&&(i=="MSPointerMove"||i=="pointermove"?this._handleMove(n,e,t,t.pageX,t.pageY):(i=="MSPointerUp"||i=="MSPointerCancel"||i=="pointerup"||i=="pointercancel")&&(delete r[e],this._handleEnd(n,e,t)))}},o._handleStart=function(n,t,i,e,r){var a=n.__touch;if(!(!a.multitouch&&a.count)){var u=a.pointers;u[t]||(u[t]=!0,a.count++,n._handlePointerDown(t,i,e,r))}},o._handleMove=function(n,t,i,e,r){n.__touch.pointers[t]&&n._handlePointerMove(t,i,e,r)},o._handleEnd=function(n,t,i){var e=n.__touch,r=e.pointers;r[t]&&(e.count--,n._handlePointerUp(t,i,!0),delete r[t])},h.Touch=o}(),function(){var o=h.EaselJS=h.EaselJS||{};o.version="0.8.2",o.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),function(){var o=h.PreloadJS=h.PreloadJS||{};o.version="0.6.2",o.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),function(){h.proxy=function(o,n){var t=Array.prototype.slice.call(arguments,2);return function(){return o.apply(n,Array.prototype.slice.call(arguments,0).concat(t))}}}(),function(){function o(t,i,e){this.Event_constructor("error"),this.title=t,this.message=i,this.data=e}var n=h.extend(o,h.Event);n.clone=function(){return new h.ErrorEvent(this.title,this.message,this.data)},h.ErrorEvent=h.promote(o,"Event")}(),function(o){function n(i,e){this.Event_constructor("progress"),this.loaded=i,this.total=e??1,this.progress=e==0?0:this.loaded/this.total}var t=h.extend(n,h.Event);t.clone=function(){return new h.ProgressEvent(this.loaded,this.total)},h.ProgressEvent=h.promote(n,"Event")}(),function(){var o=!1,n={function:!0,object:!0},t=D&&!D.nodeType&&D,i=n[typeof window]&&window||this,e=t&&n.object&&X&&!X.nodeType&&typeof st=="object"&&st;e&&(e.global===e||e.window===e||e.self===e)&&(i=e);function r(d,f){d||(d=i.Object()),f||(f=i.Object());var _=d.Number||i.Number,p=d.String||i.String,v=d.Object||i.Object,g=d.Date||i.Date,E=d.SyntaxError||i.SyntaxError,w=d.TypeError||i.TypeError,R=d.Math||i.Math,M=d.JSON||i.JSON;typeof M=="object"&&M&&(f.stringify=M.stringify,f.parse=M.parse);var x=v.prototype,C=x.toString,N,V,k,H=new g(-0xc782b5b800cec);try{H=H.getUTCFullYear()==-109252&&H.getUTCMonth()===0&&H.getUTCDate()===1&&H.getUTCHours()==10&&H.getUTCMinutes()==37&&H.getUTCSeconds()==6&&H.getUTCMilliseconds()==708}catch{}function B(m){if(B[m]!==k)return B[m];var b;if(m=="bug-string-char-index")b="a"[0]!="a";else if(m=="json")b=B("json-stringify")&&B("json-parse");else{var T,A='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(m=="json-stringify"){var S=f.stringify,F=typeof S=="function"&&H;if(F){(T=function(){return 1}).toJSON=T;try{F=S(0)==="0"&&S(new _)==="0"&&S(new p)=='""'&&S(C)===k&&S(k)===k&&S()===k&&S(T)==="1"&&S([T])=="[1]"&&S([k])=="[null]"&&S(null)=="null"&&S([k,C,null])=="[null,null,null]"&&S({a:[T,!0,!1,null,`\0\b
\f\r	`]})==A&&S(null,T)==="1"&&S([1,2],null,1)==`[
 1,
 2
]`&&S(new g(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&S(new g(864e13))=='"+275760-09-13T00:00:00.000Z"'&&S(new g(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&S(new g(-1))=='"1969-12-31T23:59:59.999Z"'}catch{F=!1}}b=F}if(m=="json-parse"){var y=f.parse;if(typeof y=="function")try{if(y("0")===0&&!y(!1)){T=y(A);var P=T.a.length==5&&T.a[0]===1;if(P){try{P=!y('"	"')}catch{}if(P)try{P=y("01")!==1}catch{}if(P)try{P=y("1.")!==1}catch{}}}}catch{P=!1}b=P}}return B[m]=!!b}if(!B("json")){var J="[object Function]",tt="[object Date]",K="[object Number]",Y="[object String]",j="[object Array]",at="[object Boolean]",G=B("bug-string-char-index");if(!H)var I=R.floor,_t=[0,31,59,90,120,151,181,212,243,273,304,334],rt=function(m,b){return _t[b]+365*(m-1970)+I((m-1969+(b=+(b>1)))/4)-I((m-1901+b)/100)+I((m-1601+b)/400)};if((N=x.hasOwnProperty)||(N=function(m){var b={},T;return(b.__proto__=null,b.__proto__={toString:1},b).toString!=C?N=function(A){var S=this.__proto__,F=A in(this.__proto__=null,this);return this.__proto__=S,F}:(T=b.constructor,N=function(A){var S=(this.constructor||T).prototype;return A in this&&!(A in S&&this[A]===S[A])}),b=null,N.call(this,m)}),V=function(m,b){var T=0,A,S,F;(A=function(){this.valueOf=0}).prototype.valueOf=0,S=new A;for(F in S)N.call(S,F)&&T++;return A=S=null,T?T==2?V=function(y,P){var U={},O=C.call(y)==J,W;for(W in y)!(O&&W=="prototype")&&!N.call(U,W)&&(U[W]=1)&&N.call(y,W)&&P(W)}:V=function(y,P){var U=C.call(y)==J,O,W;for(O in y)!(U&&O=="prototype")&&N.call(y,O)&&!(W=O==="constructor")&&P(O);(W||N.call(y,O="constructor"))&&P(O)}:(S=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],V=function(y,P){var U=C.call(y)==J,O,W,$=!U&&typeof y.constructor!="function"&&n[typeof y.hasOwnProperty]&&y.hasOwnProperty||N;for(O in y)!(U&&O=="prototype")&&$.call(y,O)&&P(O);for(W=S.length;O=S[--W];$.call(y,O)&&P(O));}),V(m,b)},!B("json-stringify")){var pt={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},vt="000000",q=function(m,b){return(vt+(b||0)).slice(-m)},z="\\u00",Mt=function(m){for(var b='"',T=0,A=m.length,S=!G||A>10,F=S&&(G?m.split(""):m);T<A;T++){var y=m.charCodeAt(T);switch(y){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=pt[y];break;default:if(y<32){b+=z+q(2,y.toString(16));break}b+=S?F[T]:m.charAt(T)}}return b+'"'},gt=function(m,b,T,A,S,F,y){var P,U,O,W,$,ot,yt,Et,St,Tt,et,bt,ct,ht,Pt,wt;try{P=b[m]}catch{}if(typeof P=="object"&&P)if(U=C.call(P),U==tt&&!N.call(P,"toJSON"))if(P>-1/0&&P<1/0){if(rt){for($=I(P/864e5),O=I($/365.2425)+1970-1;rt(O+1,0)<=$;O++);for(W=I(($-rt(O,0))/30.42);rt(O,W+1)<=$;W++);$=1+$-rt(O,W),ot=(P%864e5+864e5)%864e5,yt=I(ot/36e5)%24,Et=I(ot/6e4)%60,St=I(ot/1e3)%60,Tt=ot%1e3}else O=P.getUTCFullYear(),W=P.getUTCMonth(),$=P.getUTCDate(),yt=P.getUTCHours(),Et=P.getUTCMinutes(),St=P.getUTCSeconds(),Tt=P.getUTCMilliseconds();P=(O<=0||O>=1e4?(O<0?"-":"+")+q(6,O<0?-O:O):q(4,O))+"-"+q(2,W+1)+"-"+q(2,$)+"T"+q(2,yt)+":"+q(2,Et)+":"+q(2,St)+"."+q(3,Tt)+"Z"}else P=null;else typeof P.toJSON=="function"&&(U!=K&&U!=Y&&U!=j||N.call(P,"toJSON"))&&(P=P.toJSON(m));if(T&&(P=T.call(b,m,P)),P===null)return"null";if(U=C.call(P),U==at)return""+P;if(U==K)return P>-1/0&&P<1/0?""+P:"null";if(U==Y)return Mt(""+P);if(typeof P=="object"){for(ht=y.length;ht--;)if(y[ht]===P)throw w();if(y.push(P),et=[],Pt=F,F+=S,U==j){for(ct=0,ht=P.length;ct<ht;ct++)bt=gt(ct,P,T,A,S,F,y),et.push(bt===k?"null":bt);wt=et.length?S?`[
`+F+et.join(`,
`+F)+`
`+Pt+"]":"["+et.join(",")+"]":"[]"}else V(A||P,function(Lt){var Ot=gt(Lt,P,T,A,S,F,y);Ot!==k&&et.push(Mt(Lt)+":"+(S?" ":"")+Ot)}),wt=et.length?S?`{
`+F+et.join(`,
`+F)+`
`+Pt+"}":"{"+et.join(",")+"}":"{}";return y.pop(),wt}};f.stringify=function(m,b,T){var A,S,F,y;if(n[typeof b]&&b){if((y=C.call(b))==J)S=b;else if(y==j){F={};for(var P=0,U=b.length,O;P<U;O=b[P++],y=C.call(O),(y==Y||y==K)&&(F[O]=1));}}if(T)if((y=C.call(T))==K){if((T-=T%1)>0)for(A="",T>10&&(T=10);A.length<T;A+=" ");}else y==Y&&(A=T.length<=10?T:T.slice(0,10));return gt("",(O={},O[""]=m,O),S,F,A,"",[])}}if(!B("json-parse")){var Bt=p.fromCharCode,qt={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:`
`,102:"\f",114:"\r"},L,lt,Q=function(){throw L=lt=null,E()},nt=function(){for(var m=lt,b=m.length,T,A,S,F,y;L<b;)switch(y=m.charCodeAt(L),y){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return T=G?m.charAt(L):m[L],L++,T;case 34:for(T="@",L++;L<b;)if(y=m.charCodeAt(L),y<32)Q();else if(y==92)switch(y=m.charCodeAt(++L),y){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:T+=qt[y],L++;break;case 117:for(A=++L,S=L+4;L<S;L++)y=m.charCodeAt(L),y>=48&&y<=57||y>=97&&y<=102||y>=65&&y<=70||Q();T+=Bt("0x"+m.slice(A,L));break;default:Q()}else{if(y==34)break;for(y=m.charCodeAt(L),A=L;y>=32&&y!=92&&y!=34;)y=m.charCodeAt(++L);T+=m.slice(A,L)}if(m.charCodeAt(L)==34)return L++,T;Q();default:if(A=L,y==45&&(F=!0,y=m.charCodeAt(++L)),y>=48&&y<=57){for(y==48&&(y=m.charCodeAt(L+1),y>=48&&y<=57)&&Q(),F=!1;L<b&&(y=m.charCodeAt(L),y>=48&&y<=57);L++);if(m.charCodeAt(L)==46){for(S=++L;S<b&&(y=m.charCodeAt(S),y>=48&&y<=57);S++);S==L&&Q(),L=S}if(y=m.charCodeAt(L),y==101||y==69){for(y=m.charCodeAt(++L),(y==43||y==45)&&L++,S=L;S<b&&(y=m.charCodeAt(S),y>=48&&y<=57);S++);S==L&&Q(),L=S}return+m.slice(A,L)}if(F&&Q(),m.slice(L,L+4)=="true")return L+=4,!0;if(m.slice(L,L+5)=="false")return L+=5,!1;if(m.slice(L,L+4)=="null")return L+=4,null;Q()}return"$"},mt=function(m){var b,T;if(m=="$"&&Q(),typeof m=="string"){if((G?m.charAt(0):m[0])=="@")return m.slice(1);if(m=="["){for(b=[];m=nt(),m!="]";T||(T=!0))T&&(m==","?(m=nt(),m=="]"&&Q()):Q()),m==","&&Q(),b.push(mt(m));return b}else if(m=="{"){for(b={};m=nt(),m!="}";T||(T=!0))T&&(m==","?(m=nt(),m=="}"&&Q()):Q()),(m==","||typeof m!="string"||(G?m.charAt(0):m[0])!="@"||nt()!=":")&&Q(),b[m.slice(1)]=mt(nt());return b}Q()}return m},It=function(m,b,T){var A=Ct(m,b,T);A===k?delete m[b]:m[b]=A},Ct=function(m,b,T){var A=m[b],S;if(typeof A=="object"&&A)if(C.call(A)==j)for(S=A.length;S--;)It(A,S,T);else V(A,function(F){It(A,F,T)});return T.call(m,b,A)};f.parse=function(m,b){var T,A;return L=0,lt=""+m,T=mt(nt()),nt()!="$"&&Q(),L=lt=null,b&&C.call(b)==J?Ct((A={},A[""]=T,A),"",b):T}}}return f.runInContext=r,f}if(t&&!o)r(i,t);else{var a=i.JSON,u=i.JSON3,l=!1,c=r(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=a,i.JSON3=u,a=u=null),c}});i.JSON={parse:c.parse,stringify:c.stringify}}}.call(st),function(){var o={};o.appendToHead=function(n){o.getHead().appendChild(n)},o.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},o.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},h.DomUtils=o}(),function(){var o={};o.parseXML=function(n,t){var i=null;try{if(window.DOMParser){var e=new DOMParser;i=e.parseFromString(n,t)}}catch{}if(!i)try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(n)}catch{i=null}return i},o.parseJSON=function(n){if(n==null)return null;try{return JSON.parse(n)}catch(t){throw t}},h.DataUtils=o}(),function(){function o(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=h.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=t.LOAD_TIMEOUT_DEFAULT}var n=o.prototype={},t=o;t.LOAD_TIMEOUT_DEFAULT=8e3,t.create=function(i){if(typeof i=="string"){var e=new o;return e.src=i,e}else{if(i instanceof t)return i;if(i instanceof Object&&i.src)return i.loadTimeout==null&&(i.loadTimeout=t.LOAD_TIMEOUT_DEFAULT),i;throw new Error("Type not recognized.")}},n.set=function(i){for(var e in i)this[e]=i[e];return this},h.LoadItem=t}(),function(){var o={};o.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,o.RELATIVE_PATT=/^[./]*?\//i,o.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,o.parseURI=function(n){var t={absolute:!1,relative:!1};if(n==null)return t;var i=n.indexOf("?");i>-1&&(n=n.substr(0,i));var e;return o.ABSOLUTE_PATT.test(n)?t.absolute=!0:o.RELATIVE_PATT.test(n)&&(t.relative=!0),(e=n.match(o.EXTENSION_PATT))&&(t.extension=e[1].toLowerCase()),t},o.formatQueryString=function(n,t){if(n==null)throw new Error("You must specify data.");var i=[];for(var e in n)i.push(e+"="+escape(n[e]));return t&&(i=i.concat(t)),i.join("&")},o.buildPath=function(n,t){if(t==null)return n;var i=[],e=n.indexOf("?");if(e!=-1){var r=n.slice(e+1);i=i.concat(r.split("&"))}return e!=-1?n.slice(0,e)+"?"+this.formatQueryString(t,i):n+"?"+this.formatQueryString(t,i)},o.isCrossDomain=function(n){var t=document.createElement("a");t.href=n.src;var i=document.createElement("a");i.href=location.href;var e=t.hostname!=""&&(t.port!=i.port||t.protocol!=i.protocol||t.hostname!=i.hostname);return e},o.isLocal=function(n){var t=document.createElement("a");return t.href=n.src,t.hostname==""&&t.protocol=="file:"},o.isBinary=function(n){switch(n){case h.AbstractLoader.IMAGE:case h.AbstractLoader.BINARY:return!0;default:return!1}},o.isImageTag=function(n){return n instanceof HTMLImageElement},o.isAudioTag=function(n){return window.HTMLAudioElement?n instanceof HTMLAudioElement:!1},o.isVideoTag=function(n){return window.HTMLVideoElement?n instanceof HTMLVideoElement:!1},o.isText=function(n){switch(n){case h.AbstractLoader.TEXT:case h.AbstractLoader.JSON:case h.AbstractLoader.MANIFEST:case h.AbstractLoader.XML:case h.AbstractLoader.CSS:case h.AbstractLoader.SVG:case h.AbstractLoader.JAVASCRIPT:case h.AbstractLoader.SPRITESHEET:return!0;default:return!1}},o.getTypeByExtension=function(n){if(n==null)return h.AbstractLoader.TEXT;switch(n.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return h.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return h.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return h.AbstractLoader.VIDEO;case"json":return h.AbstractLoader.JSON;case"xml":return h.AbstractLoader.XML;case"css":return h.AbstractLoader.CSS;case"js":return h.AbstractLoader.JAVASCRIPT;case"svg":return h.AbstractLoader.SVG;default:return h.AbstractLoader.TEXT}},h.RequestUtils=o}(),function(){function o(i,e,r){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=r,this.resultFormatter=null,i?this._item=h.LoadItem.create(i):this._item=null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var n=h.extend(o,h.EventDispatcher),t=o;t.POST="POST",t.GET="GET",t.BINARY="binary",t.CSS="css",t.IMAGE="image",t.JAVASCRIPT="javascript",t.JSON="json",t.JSONP="jsonp",t.MANIFEST="manifest",t.SOUND="sound",t.VIDEO="video",t.SPRITESHEET="spritesheet",t.SVG="svg",t.TEXT="text",t.XML="xml",n.getItem=function(){return this._item},n.getResult=function(i){return i?this._rawResult:this._result},n.getTag=function(){return this._tag},n.setTag=function(i){this._tag=i},n.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var i=new h.Event("initialize");i.loader=this._request,this.dispatchEvent(i),this._request.load()},n.cancel=function(){this.canceled=!0,this.destroy()},n.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},n.getLoadedItems=function(){return this._loadedItems},n._createRequest=function(){this._preferXHR?this._request=new h.XHRRequest(this._item):this._request=new h.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},n._createTag=function(i){return null},n._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},n._sendProgress=function(i){if(!this._isCanceled()){var e=null;typeof i=="number"?(this.progress=i,e=new h.ProgressEvent(this.progress)):(e=i,this.progress=i.loaded/i.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},n._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var i=new h.Event("complete");i.rawResult=this._rawResult,this._result!=null&&(i.result=this._result),this.dispatchEvent(i)}},n._sendError=function(i){this._isCanceled()||!this.hasEventListener("error")||(i==null&&(i=new h.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(i))},n._isCanceled=function(){return!!(window.createjs==null||this.canceled)},n.resultFormatter=null,n.handleEvent=function(i){switch(i.type){case"complete":this._rawResult=i.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,h.proxy(this._resultFormatSuccess,this),h.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(i);break;case"error":this._sendError(i);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new h.ErrorEvent("PRELOAD_"+i.type.toUpperCase()+"_ERROR"));break}},n._resultFormatSuccess=function(i){this._result=i,this._sendComplete()},n._resultFormatFailed=function(i){this._sendError(i)},n.buildPath=function(i,e){return h.RequestUtils.buildPath(i,e)},n.toString=function(){return"[PreloadJS AbstractLoader]"},h.AbstractLoader=h.promote(o,"EventDispatcher")}(),function(){function o(t,i,e){this.AbstractLoader_constructor(t,i,e),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var n=h.extend(o,h.AbstractLoader);n.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},n._createTag=function(){},n._createRequest=function(){this._preferXHR?this._request=new h.XHRRequest(this._item):this._request=new h.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},n._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},n._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var i=window.URL||window.webkitURL,e=t.getResult(!0);t.getTag().src=i.createObjectURL(e)}return t.getTag()},h.AbstractMediaLoader=h.promote(o,"AbstractLoader")}(),function(){var o=function(t){this._item=t},n=h.extend(o,h.EventDispatcher);n.load=function(){},n.destroy=function(){},n.cancel=function(){},h.AbstractRequest=h.promote(o,"EventDispatcher")}(),function(){function o(t,i,e){this.AbstractRequest_constructor(t),this._tag=i,this._tagSrcAttribute=e,this._loadedHandler=h.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var n=h.extend(o,h.AbstractRequest);n.load=function(){this._tag.onload=h.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=h.proxy(this._handleReadyStateChange,this),this._tag.onerror=h.proxy(this._handleError,this);var t=new h.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(h.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},n.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},n._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},n._handleError=function(){this._clean(),this.dispatchEvent("error")},n._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},n._handleTimeout=function(){this._clean(),this.dispatchEvent(new h.Event("timeout"))},n._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},n._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},n._showTag=function(){this._tag.style.visibility=this._startTagVisibility},n._handleStalled=function(){},h.TagRequest=h.promote(o,"AbstractRequest")}(),function(){function o(t,i,e){this.AbstractRequest_constructor(t),this._tag=i,this._tagSrcAttribute=e,this._loadedHandler=h.proxy(this._handleTagComplete,this)}var n=h.extend(o,h.TagRequest);n.load=function(){var t=h.proxy(this._handleStalled,this);this._stalledCallback=t;var i=h.proxy(this._handleProgress,this);this._handleProgress=i,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",i),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},n._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},n._handleStalled=function(){},n._handleProgress=function(t){if(!(!t||t.loaded>0&&t.total==0)){var i=new h.ProgressEvent(t.loaded,t.total);this.dispatchEvent(i)}},n._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},h.MediaTagRequest=h.promote(o,"TagRequest")}(),function(){function o(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=h.proxy(this._handleLoadStart,this),this._handleProgressProxy=h.proxy(this._handleProgress,this),this._handleAbortProxy=h.proxy(this._handleAbort,this),this._handleErrorProxy=h.proxy(this._handleError,this),this._handleTimeoutProxy=h.proxy(this._handleTimeout,this),this._handleLoadProxy=h.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=h.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var n=h.extend(o,h.AbstractRequest);o.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},n.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},n.load=function(){if(this._request==null){this._handleError();return}this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(h.proxy(this._handleTimeout,this),this._item.loadTimeout));try{!this._item.values||this._item.method==h.AbstractLoader.GET?this._request.send():this._item.method==h.AbstractLoader.POST&&this._request.send(h.RequestUtils.formatQueryString(this._item.values))}catch(t){this.dispatchEvent(new h.ErrorEvent("XHR_SEND",null,t))}},n.setResponseType=function(t){t==="blob"&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},n.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},n.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},n._handleProgress=function(t){if(!(!t||t.loaded>0&&t.total==0)){var i=new h.ProgressEvent(t.loaded,t.total);this.dispatchEvent(i)}},n._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},n._handleAbort=function(t){this._clean(),this.dispatchEvent(new h.ErrorEvent("XHR_ABORTED",null,t))},n._handleError=function(t){this._clean(),this.dispatchEvent(new h.ErrorEvent(t.message))},n._handleReadyStateChange=function(t){this._request.readyState==4&&this._handleLoad()},n._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var i=this._checkError();if(i){this._handleError(i);return}if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(r){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r.name==="TypeError"&&window.BlobBuilder){var e=new BlobBuilder;e.append(this._response),this._response=e.getBlob()}}this._clean(),this.dispatchEvent(new h.Event("complete"))}},n._handleTimeout=function(t){this._clean(),this.dispatchEvent(new h.ErrorEvent("PRELOAD_TIMEOUT",null,t))},n._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},n._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch{}try{if(this._request.responseXML!=null)return this._request.responseXML}catch{}return null},n._createXHR=function(t){var i=h.RequestUtils.isCrossDomain(t),e={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,i&&r.withCredentials===void 0&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var a=0,u=s.ACTIVEX_VERSIONS.length;a<u;a++){var l=s.ACTIVEX_VERSIONS[a];try{r=new ActiveXObject(l);break}catch{}}if(r==null)return!1}t.mimeType==null&&h.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel=typeof r.responseType=="string"?2:1;var c=null;if(t.method==h.AbstractLoader.GET?c=h.RequestUtils.buildPath(t.src,t.values):c=t.src,r.open(t.method||h.AbstractLoader.GET,c,!0),i&&r instanceof XMLHttpRequest&&this._xhrLevel==1&&(e.Origin=location.origin),t.values&&t.method==h.AbstractLoader.POST&&(e["Content-Type"]="application/x-www-form-urlencoded"),!i&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var d in t.headers)e[d]=t.headers[d];for(d in e)r.setRequestHeader(d,e[d]);return r instanceof XMLHttpRequest&&t.withCredentials!==void 0&&(r.withCredentials=t.withCredentials),this._request=r,!0},n._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},n.toString=function(){return"[PreloadJS XHRRequest]"},h.XHRRequest=h.promote(o,"AbstractRequest")}(),function(){function o(i,e,r){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[h.ImageLoader,h.JavaScriptLoader,h.CSSLoader,h.JSONLoader,h.JSONPLoader,h.SoundLoader,h.ManifestLoader,h.SpriteSheetLoader,h.XMLLoader,h.SVGLoader,h.BinaryLoader,h.VideoLoader,h.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(i,e,r)}var n=h.extend(o,h.AbstractLoader),t=o;n.init=function(i,e,r){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(i),this._paused=!1,this._basePath=e,this._crossOrigin=r,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},t.loadTimeout=8e3,t.LOAD_TIMEOUT=0,t.BINARY=h.AbstractLoader.BINARY,t.CSS=h.AbstractLoader.CSS,t.IMAGE=h.AbstractLoader.IMAGE,t.JAVASCRIPT=h.AbstractLoader.JAVASCRIPT,t.JSON=h.AbstractLoader.JSON,t.JSONP=h.AbstractLoader.JSONP,t.MANIFEST=h.AbstractLoader.MANIFEST,t.SOUND=h.AbstractLoader.SOUND,t.VIDEO=h.AbstractLoader.VIDEO,t.SVG=h.AbstractLoader.SVG,t.TEXT=h.AbstractLoader.TEXT,t.XML=h.AbstractLoader.XML,t.POST=h.AbstractLoader.POST,t.GET=h.AbstractLoader.GET,n.registerLoader=function(i){if(!i||!i.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(i)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(i)},n.unregisterLoader=function(i){var e=this._availableLoaders.indexOf(i);e!=-1&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},n.setUseXHR=function(i){return this.setPreferXHR(i)},n.setPreferXHR=function(i){return this.preferXHR=i!=!1&&window.XMLHttpRequest!=null,this.preferXHR},n.removeAll=function(){this.remove()},n.remove=function(i){var e=null;if(i&&!Array.isArray(i))e=[i];else if(i)e=i;else if(arguments.length>0)return;var r=!1;if(e){for(;e.length;){var u=e.pop(),l=this.getResult(u);for(c=this._loadQueue.length-1;c>=0;c--)if(d=this._loadQueue[c].getItem(),d.id==u||d.src==u){this._loadQueue.splice(c,1)[0].cancel();break}for(c=this._loadQueueBackup.length-1;c>=0;c--)if(d=this._loadQueueBackup[c].getItem(),d.id==u||d.src==u){this._loadQueueBackup.splice(c,1)[0].cancel();break}if(l)this._disposeItem(this.getItem(u));else for(var c=this._currentLoads.length-1;c>=0;c--){var d=this._currentLoads[c].getItem();if(d.id==u||d.src==u){this._currentLoads.splice(c,1)[0].cancel(),r=!0;break}}}r&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},n.reset=function(){this.close();for(var i in this._loadItemsById)this._disposeItem(this._loadItemsById[i]);for(var e=[],r=0,a=this._loadQueueBackup.length;r<a;r++)e.push(this._loadQueueBackup[r].getItem());this.loadManifest(e,!1)},n.installPlugin=function(i){if(i!=null&&i.getPreloadHandlers!=null){this._plugins.push(i);var e=i.getPreloadHandlers();if(e.scope=i,e.types!=null)for(var r=0,a=e.types.length;r<a;r++)this._typeCallbacks[e.types[r]]=e;if(e.extensions!=null)for(r=0,a=e.extensions.length;r<a;r++)this._extensionCallbacks[e.extensions[r]]=e}},n.setMaxConnections=function(i){this._maxConnections=i,!this._paused&&this._loadQueue.length>0&&this._loadNext()},n.loadFile=function(i,e,r){if(i==null){var a=new h.ErrorEvent("PRELOAD_NO_FILE");this._sendError(a);return}this._addItem(i,null,r),e!==!1?this.setPaused(!1):this.setPaused(!0)},n.loadManifest=function(i,e,r){var a=null,u=null;if(Array.isArray(i)){if(i.length==0){var l=new h.ErrorEvent("PRELOAD_MANIFEST_EMPTY");this._sendError(l);return}a=i}else if(typeof i=="string")a=[{src:i,type:t.MANIFEST}];else if(typeof i=="object")if(i.src!==void 0){if(i.type==null)i.type=t.MANIFEST;else if(i.type!=t.MANIFEST){var l=new h.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(l)}a=[i]}else i.manifest!==void 0&&(a=i.manifest,u=i.path);else{var l=new h.ErrorEvent("PRELOAD_MANIFEST_NULL");this._sendError(l);return}for(var c=0,d=a.length;c<d;c++)this._addItem(a[c],u,r);e!==!1?this.setPaused(!1):this.setPaused(!0)},n.load=function(){this.setPaused(!1)},n.getItem=function(i){return this._loadItemsById[i]||this._loadItemsBySrc[i]},n.getResult=function(i,e){var r=this._loadItemsById[i]||this._loadItemsBySrc[i];if(r==null)return null;var a=r.id;return e&&this._loadedRawResults[a]?this._loadedRawResults[a]:this._loadedResults[a]},n.getItems=function(i){var e=[];for(var r in this._loadItemsById){var a=this._loadItemsById[r],u=this.getResult(r);i===!0&&u==null||e.push({item:a,result:u,rawResult:this.getResult(r,!0)})}return e},n.setPaused=function(i){this._paused=i,this._paused||this._loadNext()},n.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},n._addItem=function(i,e,r){var a=this._createLoadItem(i,e,r);if(a!=null){var u=this._createLoader(a);u!=null&&("plugins"in u&&(u.plugins=this._plugins),a._loader=u,this._loadQueue.push(u),this._loadQueueBackup.push(u),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&a.type==h.LoadQueue.JAVASCRIPT||a.maintainOrder===!0)&&(this._scriptOrder.push(a),this._loadedScripts.push(null)))}},n._createLoadItem=function(i,e,r){var a=h.LoadItem.create(i);if(a==null)return null;var u="",l=r||this._basePath;if(a.src instanceof Object){if(!a.type)return null;if(e){u=e;var c=h.RequestUtils.parseURI(e);l!=null&&!c.absolute&&!c.relative&&(u=l+u)}else l!=null&&(u=l)}else{var d=h.RequestUtils.parseURI(a.src);d.extension&&(a.ext=d.extension),a.type==null&&(a.type=h.RequestUtils.getTypeByExtension(a.ext));var f=a.src;if(!d.absolute&&!d.relative)if(e){u=e;var c=h.RequestUtils.parseURI(e);f=e+f,l!=null&&!c.absolute&&!c.relative&&(u=l+u)}else l!=null&&(u=l);a.src=u+a.src}a.path=u,(a.id===void 0||a.id===null||a.id==="")&&(a.id=f);var _=this._typeCallbacks[a.type]||this._extensionCallbacks[a.ext];if(_){var p=_.callback.call(_.scope,a,this);if(p===!1)return null;p===!0||p!=null&&(a._loader=p),d=h.RequestUtils.parseURI(a.src),d.extension!=null&&(a.ext=d.extension)}return this._loadItemsById[a.id]=a,this._loadItemsBySrc[a.src]=a,a.crossOrigin==null&&(a.crossOrigin=this._crossOrigin),a},n._createLoader=function(i){if(i._loader!=null)return i._loader;for(var e=this.preferXHR,r=0;r<this._availableLoaders.length;r++){var a=this._availableLoaders[r];if(a&&a.canLoadItem(i))return new a(i,e)}return null},n._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var i=0;i<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);i++){var e=this._loadQueue[i];this._canStartLoad(e)&&(this._loadQueue.splice(i,1),i--,this._loadItem(e))}}},n._loadItem=function(i){i.on("fileload",this._handleFileLoad,this),i.on("progress",this._handleProgress,this),i.on("complete",this._handleFileComplete,this),i.on("error",this._handleError,this),i.on("fileerror",this._handleFileError,this),this._currentLoads.push(i),this._sendFileStart(i.getItem()),i.load()},n._handleFileLoad=function(i){i.target=null,this.dispatchEvent(i)},n._handleFileError=function(i){var e=new h.ErrorEvent("FILE_LOAD_ERROR",null,i.item);this._sendError(e)},n._handleError=function(i){var e=i.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var r=new h.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(r),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},n._handleFileComplete=function(i){var e=i.target,r=e.getItem(),a=e.getResult();this._loadedResults[r.id]=a;var u=e.getResult(!0);u!=null&&u!==a&&(this._loadedRawResults[r.id]=u),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(r,e),this._cleanLoadItem(e)},n._saveLoadedItems=function(i){var e=i.getLoadedItems();if(e!==null)for(var r=0;r<e.length;r++){var a=e[r].item;this._loadItemsBySrc[a.src]=a,this._loadItemsById[a.id]=a,this._loadedResults[a.id]=e[r].result,this._loadedRawResults[a.id]=e[r].rawResult}},n._finishOrderedItem=function(i,e){var r=i.getItem();if(this.maintainScriptOrder&&r.type==h.LoadQueue.JAVASCRIPT||r.maintainOrder){i instanceof h.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var a=h.indexOf(this._scriptOrder,r);return a==-1?!1:(this._loadedScripts[a]=e===!0?!0:r,this._checkScriptLoadOrder(),!0)}return!1},n._checkScriptLoadOrder=function(){for(var i=this._loadedScripts.length,e=0;e<i;e++){var r=this._loadedScripts[e];if(r===null)break;if(r!==!0){var a=this._loadedResults[r.id];r.type==h.LoadQueue.JAVASCRIPT&&h.DomUtils.appendToHead(a);var u=r._loader;this._processFinishedLoad(r,u),this._loadedScripts[e]=!0}}},n._processFinishedLoad=function(i,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&i.type==h.LoadQueue.JAVASCRIPT){var r=e.getTag();h.DomUtils.appendToHead(r)}this._updateProgress(),this._sendFileComplete(i,e),this._loadNext()},n._canStartLoad=function(i){if(!this.maintainScriptOrder||i.preferXHR)return!0;var e=i.getItem();if(e.type!=h.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var r=this._scriptOrder.indexOf(e),a=0;a<r;){var u=this._loadedScripts[a];if(u==null)return!1;a++}return this._currentlyLoadingScript=!0,!0},n._removeLoadItem=function(i){for(var e=this._currentLoads.length,r=0;r<e;r++)if(this._currentLoads[r]==i){this._currentLoads.splice(r,1);break}},n._cleanLoadItem=function(i){var e=i.getItem();e&&delete e._loader},n._handleProgress=function(i){var e=i.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},n._updateProgress=function(){var i=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var r=0,a=0,u=this._currentLoads.length;a<u;a++)r+=this._currentLoads[a].progress;i+=r/e*(e/this._numItems)}this._lastProgress!=i&&(this._sendProgress(i),this._lastProgress=i)},n._disposeItem=function(i){delete this._loadedResults[i.id],delete this._loadedRawResults[i.id],delete this._loadItemsById[i.id],delete this._loadItemsBySrc[i.src]},n._sendFileProgress=function(i,e){if(!(this._isCanceled()||this._paused)&&this.hasEventListener("fileprogress")){var r=new h.Event("fileprogress");r.progress=e,r.loaded=e,r.total=1,r.item=i,this.dispatchEvent(r)}},n._sendFileComplete=function(i,e){if(!(this._isCanceled()||this._paused)){var r=new h.Event("fileload");r.loader=e,r.item=i,r.result=this._loadedResults[i.id],r.rawResult=this._loadedRawResults[i.id],i.completeHandler&&i.completeHandler(r),this.hasEventListener("fileload")&&this.dispatchEvent(r)}},n._sendFileStart=function(i){var e=new h.Event("filestart");e.item=i,this.hasEventListener("filestart")&&this.dispatchEvent(e)},n.toString=function(){return"[PreloadJS LoadQueue]"},h.LoadQueue=h.promote(o,"AbstractLoader")}(),function(){function o(t){this.AbstractLoader_constructor(t,!0,h.AbstractLoader.TEXT)}h.extend(o,h.AbstractLoader);var n=o;n.canLoadItem=function(t){return t.type==h.AbstractLoader.TEXT},h.TextLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i){this.AbstractLoader_constructor(i,!0,h.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.BINARY},n._updateXHR=function(i){i.loader.setResponseType("arraybuffer")},h.BinaryLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e){this.AbstractLoader_constructor(i,e,h.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",e?this._tag=document.createElement("style"):this._tag=document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.CSS},n._formatResult=function(i){if(this._preferXHR){var e=i.getTag();if(e.styleSheet)e.styleSheet.cssText=i.getResult(!0);else{var r=document.createTextNode(i.getResult(!0));e.appendChild(r)}}else e=this._tag;return h.DomUtils.appendToHead(e),e},h.CSSLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e){this.AbstractLoader_constructor(i,e,h.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",h.RequestUtils.isImageTag(i)?this._tag=i:h.RequestUtils.isImageTag(i.src)?this._tag=i.src:h.RequestUtils.isImageTag(i.tag)&&(this._tag=i.tag),this._tag!=null?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.IMAGE},n.load=function(){if(this._tag.src!=""&&this._tag.complete){this._sendComplete();return}var i=this._item.crossOrigin;i==!0&&(i="Anonymous"),i!=null&&!h.RequestUtils.isLocal(this._item.src)&&(this._tag.crossOrigin=i),this.AbstractLoader_load()},n._updateXHR=function(i){i.loader.mimeType="text/plain; charset=x-user-defined-binary",i.loader.setResponseType&&i.loader.setResponseType("blob")},n._formatResult=function(i){return this._formatImage},n._formatImage=function(i,e){var r=this._tag,a=window.URL||window.webkitURL;if(this._preferXHR)if(a){var u=a.createObjectURL(this.getResult(!0));r.src=u,r.addEventListener("load",this._cleanUpURL,!1),r.addEventListener("error",this._cleanUpURL,!1)}else r.src=this._item.src;r.complete?i(r):(r.onload=h.proxy(function(){i(this._tag)},this),r.onerror=h.proxy(function(){e(_this._tag)},this))},n._cleanUpURL=function(i){var e=window.URL||window.webkitURL;e.revokeObjectURL(i.target.src)},h.ImageLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e){this.AbstractLoader_constructor(i,e,h.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.JAVASCRIPT},n._formatResult=function(i){var e=i.getTag();return this._preferXHR&&(e.text=i.getResult(!0)),e},h.JavaScriptLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i){this.AbstractLoader_constructor(i,!0,h.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.JSON},n._formatResult=function(i){var e=null;try{e=h.DataUtils.parseJSON(i.getResult(!0))}catch(a){var r=new h.ErrorEvent("JSON_FORMAT",null,a);return this._sendError(r),a}return e},h.JSONLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i){this.AbstractLoader_constructor(i,!1,h.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.JSONP},n.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},n.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=h.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(h.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},n._handleLoad=function(i){this._result=this._rawResult=i,this._sendComplete(),this._dispose()},n._handleTimeout=function(){this._dispose(),this.dispatchEvent(new h.ErrorEvent("timeout"))},n._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},h.JSONPLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i){this.AbstractLoader_constructor(i,null,h.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var n=h.extend(o,h.AbstractLoader),t=o;t.MANIFEST_PROGRESS=.25,t.canLoadItem=function(i){return i.type==h.AbstractLoader.MANIFEST},n.load=function(){this.AbstractLoader_load()},n._createRequest=function(){var i=this._item.callback;i!=null?this._request=new h.JSONPLoader(this._item):this._request=new h.JSONLoader(this._item)},n.handleEvent=function(i){switch(i.type){case"complete":this._rawResult=i.target.getResult(!0),this._result=i.target.getResult(),this._sendProgress(t.MANIFEST_PROGRESS),this._loadManifest(this._result);return;case"progress":i.loaded*=t.MANIFEST_PROGRESS,this.progress=i.loaded/i.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),this._sendProgress(i);return}this.AbstractLoader_handleEvent(i)},n.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},n._loadManifest=function(i){if(i&&i.manifest){var e=this._manifestQueue=new h.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var r=0,a=this.plugins.length;r<a;r++)e.installPlugin(this.plugins[r]);e.loadManifest(i)}else this._sendComplete()},n._handleManifestFileLoad=function(i){i.target=null,this.dispatchEvent(i)},n._handleManifestComplete=function(i){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},n._handleManifestProgress=function(i){this.progress=i.progress*(1-t.MANIFEST_PROGRESS)+t.MANIFEST_PROGRESS,this._sendProgress(this.progress)},n._handleManifestError=function(i){var e=new h.Event("fileerror");e.item=i.data,this.dispatchEvent(e)},h.ManifestLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e){this.AbstractMediaLoader_constructor(i,e,h.AbstractLoader.SOUND),h.RequestUtils.isAudioTag(i)?this._tag=i:h.RequestUtils.isAudioTag(i.src)?this._tag=i:h.RequestUtils.isAudioTag(i.tag)&&(this._tag=h.RequestUtils.isAudioTag(i)?i:i.src),this._tag!=null&&(this._preferXHR=!1)}var n=h.extend(o,h.AbstractMediaLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.SOUND},n._createTag=function(i){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=i,e},h.SoundLoader=h.promote(o,"AbstractMediaLoader")}(),function(){function o(i,e){this.AbstractMediaLoader_constructor(i,e,h.AbstractLoader.VIDEO),h.RequestUtils.isVideoTag(i)||h.RequestUtils.isVideoTag(i.src)?(this.setTag(h.RequestUtils.isVideoTag(i)?i:i.src),this._preferXHR=!1):this.setTag(this._createTag())}var n=h.extend(o,h.AbstractMediaLoader),t=o;n._createTag=function(){return document.createElement("video")},t.canLoadItem=function(i){return i.type==h.AbstractLoader.VIDEO},h.VideoLoader=h.promote(o,"AbstractMediaLoader")}(),function(){function o(i,e){this.AbstractLoader_constructor(i,e,h.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var n=h.extend(o,h.AbstractLoader),t=o;t.SPRITESHEET_PROGRESS=.25,t.canLoadItem=function(i){return i.type==h.AbstractLoader.SPRITESHEET},n.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},n._createRequest=function(){var i=this._item.callback;i!=null?this._request=new h.JSONPLoader(this._item):this._request=new h.JSONLoader(this._item)},n.handleEvent=function(i){switch(i.type){case"complete":this._rawResult=i.target.getResult(!0),this._result=i.target.getResult(),this._sendProgress(t.SPRITESHEET_PROGRESS),this._loadManifest(this._result);return;case"progress":i.loaded*=t.SPRITESHEET_PROGRESS,this.progress=i.loaded/i.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),this._sendProgress(i);return}this.AbstractLoader_handleEvent(i)},n._loadManifest=function(i){if(i&&i.images){var e=this._manifestQueue=new h.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(i.images)}},n._handleManifestFileLoad=function(i){var e=i.result;if(e!=null){var r=this.getResult().images,a=r.indexOf(i.item.src);r[a]=e}},n._handleManifestComplete=function(i){this._result=new h.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},n._handleManifestProgress=function(i){this.progress=i.progress*(1-t.SPRITESHEET_PROGRESS)+t.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},n._handleManifestError=function(i){var e=new h.Event("fileerror");e.item=i.data,this.dispatchEvent(e)},h.SpriteSheetLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e){this.AbstractLoader_constructor(i,e,h.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.SVG},n._formatResult=function(i){var e=h.DataUtils.parseXML(i.getResult(!0),"text/xml"),r=i.getTag();return!this._preferXHR&&document.body.contains(r)&&document.body.removeChild(r),e.documentElement!=null?(r.appendChild(e.documentElement),r.style.visibility="visible",r):e},h.SVGLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i){this.AbstractLoader_constructor(i,!0,h.AbstractLoader.XML),this.resultFormatter=this._formatResult}var n=h.extend(o,h.AbstractLoader),t=o;t.canLoadItem=function(i){return i.type==h.AbstractLoader.XML},n._formatResult=function(i){return h.DataUtils.parseXML(i.getResult(!0),"text/xml")},h.XMLLoader=h.promote(o,"AbstractLoader")}(),function(){var o=h.SoundJS=h.SoundJS||{};o.version="0.6.2",o.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),h.indexOf=function(o,n){for(var t=0,i=o.length;t<i;t++)if(n===o[t])return t;return-1},function(){h.proxy=function(o,n){var t=Array.prototype.slice.call(arguments,2);return function(){return o.apply(n,Array.prototype.slice.call(arguments,0).concat(t))}}}(),function(){function o(){throw"BrowserDetect cannot be instantiated"}var n=o.agent=window.navigator.userAgent;o.isWindowPhone=n.indexOf("IEMobile")>-1||n.indexOf("Windows Phone")>-1,o.isFirefox=n.indexOf("Firefox")>-1,o.isOpera=window.opera!=null,o.isChrome=n.indexOf("Chrome")>-1,o.isIOS=(n.indexOf("iPod")>-1||n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1)&&!o.isWindowPhone,o.isAndroid=n.indexOf("Android")>-1&&!o.isWindowPhone,o.isBlackberry=n.indexOf("Blackberry")>-1,h.BrowserDetect=o}(),function(){var o=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},n=o.prototype={},t=o;t.create=function(i){if(i instanceof t||i instanceof Object){var e=new h.PlayPropsConfig;return e.set(i),e}else throw new Error("Type not recognized.")},n.set=function(i){for(var e in i)this[e]=i[e];return this},n.toString=function(){return"[PlayPropsConfig]"},h.PlayPropsConfig=t}(),function(){function o(){throw"Sound cannot be instantiated"}var n=o;n.INTERRUPT_ANY="any",n.INTERRUPT_EARLY="early",n.INTERRUPT_LATE="late",n.INTERRUPT_NONE="none",n.PLAY_INITED="playInited",n.PLAY_SUCCEEDED="playSucceeded",n.PLAY_INTERRUPTED="playInterrupted",n.PLAY_FINISHED="playFinished",n.PLAY_FAILED="playFailed",n.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],n.EXTENSION_MAP={m4a:"mp4"},n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.defaultInterruptBehavior=n.INTERRUPT_NONE,n.alternateExtensions=[],n.activePlugin=null,n._masterVolume=1,Object.defineProperty(n,"volume",{get:function(){return this._masterVolume},set:function(e){if(Number(e)==null)return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var r=this._instances,a=0,u=r.length;a<u;a++)r[a].setMasterVolume(e)}}),n._masterMute=!1,Object.defineProperty(n,"muted",{get:function(){return this._masterMute},set:function(e){if(e==null)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var r=this._instances,a=0,u=r.length;a<u;a++)r[a].setMasterMute(e);return!0}}),Object.defineProperty(n,"capabilities",{get:function(){return n.activePlugin==null?null:n.activePlugin._capabilities},set:function(e){return!1}}),n._pluginsRegistered=!1,n._lastID=0,n._instances=[],n._idHash={},n._preloadHash={},n._defaultPlayPropsHash={},n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,h.EventDispatcher.initialize(n),n.getPreloadHandlers=function(){return{callback:h.proxy(n.initLoad,n),types:["sound"],extensions:n.SUPPORTED_EXTENSIONS}},n._handleLoadComplete=function(e){var r=e.target.getItem().src;if(n._preloadHash[r])for(var a=0,u=n._preloadHash[r].length;a<u;a++){var l=n._preloadHash[r][a];if(n._preloadHash[r][a]=!0,!!n.hasEventListener("fileload")){var e=new h.Event("fileload");e.src=l.src,e.id=l.id,e.data=l.data,e.sprite=l.sprite,n.dispatchEvent(e)}}},n._handleLoadError=function(e){var r=e.target.getItem().src;if(n._preloadHash[r])for(var a=0,u=n._preloadHash[r].length;a<u;a++){var l=n._preloadHash[r][a];if(n._preloadHash[r][a]=!1,!!n.hasEventListener("fileerror")){var e=new h.Event("fileerror");e.src=l.src,e.id=l.id,e.data=l.data,e.sprite=l.sprite,n.dispatchEvent(e)}}},n._registerPlugin=function(e){return e.isSupported()?(n.activePlugin=new e,!0):!1},n.registerPlugins=function(e){n._pluginsRegistered=!0;for(var r=0,a=e.length;r<a;r++)if(n._registerPlugin(e[r]))return!0;return!1},n.initializeDefaultPlugins=function(){return n.activePlugin!=null?!0:n._pluginsRegistered?!1:!!n.registerPlugins([h.WebAudioPlugin,h.HTMLAudioPlugin])},n.isReady=function(){return n.activePlugin!=null},n.getCapabilities=function(){return n.activePlugin==null?null:n.activePlugin._capabilities},n.getCapability=function(e){return n.activePlugin==null?null:n.activePlugin._capabilities[e]},n.initLoad=function(e){return n._registerSound(e)},n._registerSound=function(e){if(!n.initializeDefaultPlugins())return!1;var r;if(e.src instanceof Object?(r=n._parseSrc(e.src),r.src=e.path+r.src):r=n._parsePath(e.src),r==null)return!1;e.src=r.src,e.type="sound";var a=e.data,u=null;if(a!=null&&(isNaN(a.channels)?isNaN(a)||(u=parseInt(a)):u=parseInt(a.channels),a.audioSprite))for(var l,c=a.audioSprite.length;c--;)l=a.audioSprite[c],n._idHash[l.id]={src:e.src,startTime:parseInt(l.startTime),duration:parseInt(l.duration)},l.defaultPlayProps&&(n._defaultPlayPropsHash[l.id]=h.PlayPropsConfig.create(l.defaultPlayProps));e.id!=null&&(n._idHash[e.id]={src:e.src});var d=n.activePlugin.register(e);return t.create(e.src,u),a==null||!isNaN(a)?e.data=u||t.maxPerChannel():e.data.channels=u||t.maxPerChannel(),d.type&&(e.type=d.type),e.defaultPlayProps&&(n._defaultPlayPropsHash[e.src]=h.PlayPropsConfig.create(e.defaultPlayProps)),d},n.registerSound=function(e,r,a,u,l){var c={src:e,id:r,data:a,defaultPlayProps:l};e instanceof Object&&e.src&&(u=r,c=e),c=h.LoadItem.create(c),c.path=u,u!=null&&!(c.src instanceof Object)&&(c.src=u+e);var d=n._registerSound(c);if(!d)return!1;if(n._preloadHash[c.src]||(n._preloadHash[c.src]=[]),n._preloadHash[c.src].push(c),n._preloadHash[c.src].length==1)d.on("complete",h.proxy(this._handleLoadComplete,this)),d.on("error",h.proxy(this._handleLoadError,this)),n.activePlugin.preload(d);else if(n._preloadHash[c.src][0]==!0)return!0;return c},n.registerSounds=function(e,r){var a=[];e.path&&(r?r=r+e.path:r=e.path,e=e.manifest);for(var u=0,l=e.length;u<l;u++)a[u]=h.Sound.registerSound(e[u].src,e[u].id,e[u].data,r,e[u].defaultPlayProps);return a},n.removeSound=function(e,r){if(n.activePlugin==null)return!1;e instanceof Object&&e.src&&(e=e.src);var a;if(e instanceof Object?a=n._parseSrc(e):(e=n._getSrcById(e).src,a=n._parsePath(e)),a==null)return!1;e=a.src,r!=null&&(e=r+e);for(var u in n._idHash)n._idHash[u].src==e&&delete n._idHash[u];return t.removeSrc(e),delete n._preloadHash[e],n.activePlugin.removeSound(e),!0},n.removeSounds=function(e,r){var a=[];e.path&&(r?r=r+e.path:r=e.path,e=e.manifest);for(var u=0,l=e.length;u<l;u++)a[u]=h.Sound.removeSound(e[u].src,r);return a},n.removeAllSounds=function(){n._idHash={},n._preloadHash={},t.removeAll(),n.activePlugin&&n.activePlugin.removeAllSounds()},n.loadComplete=function(e){if(!n.isReady())return!1;var r=n._parsePath(e);return r?e=n._getSrcById(r.src).src:e=n._getSrcById(e).src,n._preloadHash[e]==null?!1:n._preloadHash[e][0]==!0},n._parsePath=function(e){typeof e!="string"&&(e=e.toString());var r=e.match(n.FILE_PATTERN);if(r==null)return!1;for(var a=r[4],u=r[5],l=n.capabilities,c=0;!l[u];)if(u=n.alternateExtensions[c++],c>n.alternateExtensions.length)return null;e=e.replace("."+r[5],"."+u);var d={name:a,src:e,extension:u};return d},n._parseSrc=function(e){var r={name:void 0,src:void 0,extension:void 0},a=n.capabilities;for(var u in e)if(e.hasOwnProperty(u)&&a[u]){r.src=e[u],r.extension=u;break}if(!r.src)return!1;var l=r.src.lastIndexOf("/");return l!=-1?r.name=r.src.slice(l+1):r.name=r.src,r},n.play=function(e,r,a,u,l,c,d,f,_){var p;r instanceof Object||r instanceof h.PlayPropsConfig?p=h.PlayPropsConfig.create(r):p=h.PlayPropsConfig.create({interrupt:r,delay:a,offset:u,loop:l,volume:c,pan:d,startTime:f,duration:_});var v=n.createInstance(e,p.startTime,p.duration),g=n._playInstance(v,p);return g||v._playFailed(),v},n.createInstance=function(e,r,a){if(!n.initializeDefaultPlugins())return new h.DefaultSoundInstance(e,r,a);var u=n._defaultPlayPropsHash[e];e=n._getSrcById(e);var l=n._parsePath(e.src),c=null;return l!=null&&l.src!=null?(t.create(l.src),r==null&&(r=e.startTime),c=n.activePlugin.create(l.src,r,a||e.duration),u=u||n._defaultPlayPropsHash[l.src],u&&c.applyPlayProps(u)):c=new h.DefaultSoundInstance(e,r,a),c.uniqueId=n._lastID++,c},n.stop=function(){for(var e=this._instances,r=e.length;r--;)e[r].stop()},n.setVolume=function(e){if(Number(e)==null)return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var r=this._instances,a=0,u=r.length;a<u;a++)r[a].setMasterVolume(e)},n.getVolume=function(){return this._masterVolume},n.setMute=function(e){if(e==null)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var r=this._instances,a=0,u=r.length;a<u;a++)r[a].setMasterMute(e);return!0},n.getMute=function(){return this._masterMute},n.setDefaultPlayProps=function(e,r){e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]=h.PlayPropsConfig.create(r)},n.getDefaultPlayProps=function(e){return e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]},n._playInstance=function(e,r){var a=n._defaultPlayPropsHash[e.src]||{};if(r.interrupt==null&&(r.interrupt=a.interrupt||n.defaultInterruptBehavior),r.delay==null&&(r.delay=a.delay||0),r.offset==null&&(r.offset=e.getPosition()),r.loop==null&&(r.loop=e.loop),r.volume==null&&(r.volume=e.volume),r.pan==null&&(r.pan=e.pan),r.delay==0){var u=n._beginPlaying(e,r);if(!u)return!1}else{var l=setTimeout(function(){n._beginPlaying(e,r)},r.delay);e.delayTimeoutId=l}return this._instances.push(e),!0},n._beginPlaying=function(e,r){if(!t.add(e,r.interrupt))return!1;var a=e._beginPlaying(r);if(!a){var u=h.indexOf(this._instances,e);return u>-1&&this._instances.splice(u,1),!1}return!0},n._getSrcById=function(e){return n._idHash[e]||{src:e}},n._playFinished=function(e){t.remove(e);var r=h.indexOf(this._instances,e);r>-1&&this._instances.splice(r,1)},h.Sound=o;function t(e,r){this.init(e,r)}t.channels={},t.create=function(e,r){var a=t.get(e);return a==null?(t.channels[e]=new t(e,r),!0):!1},t.removeSrc=function(e){var r=t.get(e);return r==null?!1:(r._removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e]._removeAll();t.channels={}},t.add=function(e,r){var a=t.get(e.src);return a==null?!1:a._add(e,r)},t.remove=function(e){var r=t.get(e.src);return r==null?!1:(r._remove(e),!0)},t.maxPerChannel=function(){return i.maxDefault},t.get=function(e){return t.channels[e]};var i=t.prototype;i.constructor=t,i.src=null,i.max=null,i.maxDefault=100,i.length=0,i.init=function(e,r){this.src=e,this.max=r||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},i._get=function(e){return this._instances[e]},i._add=function(e,r){return this._getSlot(r,e)?(this._instances.push(e),this.length++,!0):!1},i._remove=function(e){var r=h.indexOf(this._instances,e);return r==-1?!1:(this._instances.splice(r,1),this.length--,!0)},i._removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},i._getSlot=function(e,r){var a,u;if(e!=o.INTERRUPT_NONE&&(u=this._get(0),u==null))return!0;for(var l=0,c=this.max;l<c;l++){if(a=this._get(l),a==null)return!0;if(a.playState==o.PLAY_FINISHED||a.playState==o.PLAY_INTERRUPTED||a.playState==o.PLAY_FAILED){u=a;break}e!=o.INTERRUPT_NONE&&(e==o.INTERRUPT_EARLY&&a.getPosition()<u.getPosition()||e==o.INTERRUPT_LATE&&a.getPosition()>u.getPosition())&&(u=a)}return u!=null?(u._interrupt(),this._remove(u),!0):!1},i.toString=function(){return"[Sound SoundChannel]"}}(),function(){var o=function(t,i,e,r){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,i||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,e||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),r!==!1&&r!==!0&&this.setPlaybackResource(r),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},n=h.extend(o,h.EventDispatcher);n.play=function(t,i,e,r,a,u){var l;if(t instanceof Object||t instanceof h.PlayPropsConfig?l=h.PlayPropsConfig.create(t):l=h.PlayPropsConfig.create({interrupt:t,delay:i,offset:e,loop:r,volume:a,pan:u}),this.playState==h.Sound.PLAY_SUCCEEDED){this.applyPlayProps(l),this._paused&&this.setPaused(!1);return}return this._cleanUp(),h.Sound._playInstance(this,l),this},n.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=h.Sound.PLAY_FINISHED,this},n.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},n.applyPlayProps=function(t){return t.offset!=null&&this.setPosition(t.offset),t.loop!=null&&this.setLoop(t.loop),t.volume!=null&&this.setVolume(t.volume),t.pan!=null&&this.setPan(t.pan),t.startTime!=null&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},n.toString=function(){return"[AbstractSoundInstance]"},n.getPaused=function(){return this._paused},n.setPaused=function(t){if(!(t!==!0&&t!==!1||this._paused==t)&&!(t==!0&&this.playState!=h.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},n.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},n.getVolume=function(){return this._volume},n.setMuted=function(t){if(!(t!==!0&&t!==!1))return this._muted=t,this._updateVolume(),this},n.getMuted=function(){return this._muted},n.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},n.getPan=function(){return this._pan},n.getPosition=function(){return!this._paused&&this.playState==h.Sound.PLAY_SUCCEEDED&&(this._position=this._calculateCurrentPosition()),this._position},n.setPosition=function(t){return this._position=Math.max(0,t),this.playState==h.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},n.getStartTime=function(){return this._startTime},n.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},n.getDuration=function(){return this._duration},n.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},n.setPlaybackResource=function(t){return this._playbackResource=t,this._duration==0&&this._setDurationFromSource(),this},n.getPlaybackResource=function(){return this._playbackResource},n.getLoop=function(){return this._loop},n.setLoop=function(t){this._playbackResource!=null&&(this._loop!=0&&t==0?this._removeLooping(t):this._loop==0&&t!=0&&this._addLooping(t)),this._loop=t},n._sendEvent=function(t){var i=new h.Event(t);this.dispatchEvent(i)},n._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,h.Sound._playFinished(this)},n._interrupt=function(){this._cleanUp(),this.playState=h.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},n._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),t.startTime!=null&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=h.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},n._playFailed=function(){this._cleanUp(),this.playState=h.Sound.PLAY_FAILED,this._sendEvent("failed")},n._handleSoundComplete=function(t){if(this._position=0,this._loop!=0){this._loop--,this._handleLoop(),this._sendEvent("loop");return}this._cleanUp(),this.playState=h.Sound.PLAY_FINISHED,this._sendEvent("complete")},n._handleSoundReady=function(){},n._updateVolume=function(){},n._updatePan=function(){},n._updateStartTime=function(){},n._updateDuration=function(){},n._setDurationFromSource=function(){},n._calculateCurrentPosition=function(){},n._updatePosition=function(){},n._removeLooping=function(t){},n._addLooping=function(t){},n._pause=function(){},n._resume=function(){},n._handleStop=function(){},n._handleCleanUp=function(){},n._handleLoop=function(){},h.AbstractSoundInstance=h.promote(o,"EventDispatcher"),h.DefaultSoundInstance=h.AbstractSoundInstance}(),function(){var o=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},n=o.prototype;o._capabilities=null,o.isSupported=function(){return!0},n.register=function(t){var i=this._loaders[t.src];return i&&!i.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],i=new this._loaderClass(t),i.on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=i,i)},n.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},n.isPreloadStarted=function(t){return this._audioSources[t]!=null},n.isPreloadComplete=function(t){return!(this._audioSources[t]==null||this._audioSources[t]==!0)},n.removeSound=function(t){if(this._soundInstances[t]){for(var i=this._soundInstances[t].length;i--;){var e=this._soundInstances[t][i];e.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},n.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},n.create=function(t,i,e){this.isPreloadStarted(t)||this.preload(this.register(t));var r=new this._soundInstanceClass(t,i,e,this._audioSources[t]);return this._soundInstances[t].push(r),r},n.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},n.getVolume=function(){return this._volume},n.setMute=function(t){return this._updateVolume(),!0},n.toString=function(){return"[AbstractPlugin]"},n._handlePreloadComplete=function(t){var i=t.target.getItem().src;this._audioSources[i]=t.result;for(var e=0,r=this._soundInstances[i].length;e<r;e++){var a=this._soundInstances[i][e];a.setPlaybackResource(this._audioSources[i])}},n._handlePreloadError=function(t){},n._updateVolume=function(){},h.AbstractPlugin=o}(),function(){function o(t){this.AbstractLoader_constructor(t,!0,h.AbstractLoader.SOUND)}var n=h.extend(o,h.AbstractLoader);o.context=null,n.toString=function(){return"[WebAudioLoader]"},n._createRequest=function(){this._request=new h.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},n._sendComplete=function(t){o.context.decodeAudioData(this._rawResult,h.proxy(this._handleAudioDecoded,this),h.proxy(this._sendError,this))},n._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},h.WebAudioLoader=h.promote(o,"AbstractLoader")}(),function(){function o(i,e,r,a){this.AbstractSoundInstance_constructor(i,e,r,a),this.gainNode=t.context.createGain(),this.panNode=t.context.createPanner(),this.panNode.panningModel=t._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=h.proxy(this._handleSoundComplete,this)}var n=h.extend(o,h.AbstractSoundInstance),t=o;t.context=null,t._scratchBuffer=null,t.destinationNode=null,t._panningModel="equalpower",n.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},n.toString=function(){return"[WebAudioSoundInstance]"},n._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},n._removeLooping=function(i){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},n._addLooping=function(i){this.playState==h.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},n._setDurationFromSource=function(){this._duration=this.playbackResource.duration*1e3},n._handleCleanUp=function(){this.sourceNode&&this.playState==h.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},n._cleanUpAudioNode=function(i){if(i){i.stop(0),i.disconnect(0);try{i.buffer=t._scratchBuffer}catch{}i=null}return i},n._handleSoundReady=function(i){this.gainNode.connect(t.destinationNode);var e=this._duration*.001,r=this._position*.001;r>e&&(r=e),this.sourceNode=this._createAndPlayAudioNode(t.context.currentTime-e,r),this._playbackStartTime=this.sourceNode.startTime-r,this._soundCompleteTimeout=setTimeout(this._endedHandler,(e-r)*1e3),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},n._createAndPlayAudioNode=function(i,e){var r=t.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var a=this._duration*.001;return r.startTime=i+a,r.start(r.startTime,e+this._startTime*.001,a-e),r},n._pause=function(){this._position=(t.context.currentTime-this._playbackStartTime)*1e3,this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},n._resume=function(){this._handleSoundReady()},n._updateVolume=function(){var i=this._muted?0:this._volume;i!=this.gainNode.gain.value&&(this.gainNode.gain.value=i)},n._calculateCurrentPosition=function(){return(t.context.currentTime-this._playbackStartTime)*1e3},n._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},n._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},n._updateDuration=function(){this.playState==h.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},h.WebAudioSoundInstance=h.promote(o,"AbstractSoundInstance")}(),function(){function o(){this.AbstractPlugin_constructor(),this._panningModel=t._panningModel,this.context=t.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),h.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=t._capabilities,this._loaderClass=h.WebAudioLoader,this._soundInstanceClass=h.WebAudioSoundInstance,this._addPropsToClasses()}var n=h.extend(o,h.AbstractPlugin),t=o;t._capabilities=null,t._panningModel="equalpower",t.context=null,t._scratchBuffer=null,t._unlocked=!1,t.isSupported=function(){var i=h.BrowserDetect.isIOS||h.BrowserDetect.isAndroid||h.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!i&&!this._isFileXHRSupported()||(t._generateCapabilities(),t.context==null))},t.playEmptySound=function(){if(t.context!=null){var i=t.context.createBufferSource();i.buffer=t._scratchBuffer,i.connect(t.context.destination),i.start(0,0,0)}},t._isFileXHRSupported=function(){var i=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch{return i=!1,i}e.onerror=function(){i=!1},e.onload=function(){i=this.status==404||this.status==200||this.status==0&&this.response!=""};try{e.send()}catch{i=!1}return i},t._generateCapabilities=function(){if(t._capabilities==null){var i=document.createElement("audio");if(i.canPlayType==null)return null;if(t.context==null)if(window.AudioContext)t.context=new AudioContext;else if(window.webkitAudioContext)t.context=new webkitAudioContext;else return null;t._scratchBuffer==null&&(t._scratchBuffer=t.context.createBuffer(1,1,22050)),t._compatibilitySetUp(),"ontouchstart"in window&&t.context.state!="running"&&(t._unlock(),document.addEventListener("mousedown",t._unlock,!0),document.addEventListener("touchend",t._unlock,!0)),t._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=h.Sound.SUPPORTED_EXTENSIONS,r=h.Sound.EXTENSION_MAP,a=0,u=e.length;a<u;a++){var l=e[a],c=r[l]||l;t._capabilities[l]=i.canPlayType("audio/"+l)!="no"&&i.canPlayType("audio/"+l)!=""||i.canPlayType("audio/"+c)!="no"&&i.canPlayType("audio/"+c)!=""}t.context.destination.numberOfChannels<2&&(t._capabilities.panning=!1)}},t._compatibilitySetUp=function(){if(t._panningModel="equalpower",!t.context.createGain){t.context.createGain=t.context.createGainNode;var i=t.context.createBufferSource();i.__proto__.start=i.__proto__.noteGrainOn,i.__proto__.stop=i.__proto__.noteOff,t._panningModel=0}},t._unlock=function(){t._unlocked||(t.playEmptySound(),t.context.state=="running"&&(document.removeEventListener("mousedown",t._unlock,!0),document.removeEventListener("touchend",t._unlock,!0),t._unlocked=!0))},n.toString=function(){return"[WebAudioPlugin]"},n._addPropsToClasses=function(){var i=this._soundInstanceClass;i.context=this.context,i._scratchBuffer=t._scratchBuffer,i.destinationNode=this.gainNode,i._panningModel=this._panningModel,this._loaderClass.context=this.context},n._updateVolume=function(){var i=h.Sound._masterMute?0:this._volume;i!=this.gainNode.gain.value&&(this.gainNode.gain.value=i)},h.WebAudioPlugin=h.promote(o,"AbstractPlugin")}(),function(){function o(){throw"HTMLAudioTagPool cannot be instantiated"}var n=o;n._tags={},n._tagPool=new t,n._tagUsed={},n.get=function(e){var r=n._tags[e];return r==null?(r=n._tags[e]=n._tagPool.get(),r.src=e):n._tagUsed[e]?(r=n._tagPool.get(),r.src=e):n._tagUsed[e]=!0,r},n.set=function(e,r){r==n._tags[e]?n._tagUsed[e]=!1:n._tagPool.set(r)},n.remove=function(e){var r=n._tags[e];return r==null?!1:(n._tagPool.set(r),delete n._tags[e],delete n._tagUsed[e],!0)},n.getDuration=function(e){var r=n._tags[e];return r==null||!r.duration?0:r.duration*1e3},h.HTMLAudioTagPool=o;function t(e){this._tags=[]}var i=t.prototype;i.constructor=t,i.get=function(){var e;return this._tags.length==0?e=this._createTag():e=this._tags.pop(),e.parentNode==null&&document.body.appendChild(e),e},i.set=function(e){var r=h.indexOf(this._tags,e);r==-1&&(this._tags.src=null,this._tags.push(e))},i.toString=function(){return"[TagPool]"},i._createTag=function(){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e}}(),function(){function o(t,i,e,r){this.AbstractSoundInstance_constructor(t,i,e,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=h.proxy(this._handleSoundComplete,this),this._readyHandler=h.proxy(this._handleTagReady,this),this._stalledHandler=h.proxy(this._playFailed,this),this._audioSpriteEndHandler=h.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=h.proxy(this._handleSoundComplete,this),e?this._audioSpriteStopTime=(i+e)*.001:this._duration=h.HTMLAudioTagPool.getDuration(this.src)}var n=h.extend(o,h.AbstractSoundInstance);n.setMasterVolume=function(t){this._updateVolume()},n.setMasterMute=function(t){this._updateVolume()},n.toString=function(){return"[HTMLAudioSoundInstance]"},n._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},n._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},n._handleCleanUp=function(){var t=this._playbackResource;if(t!=null){t.pause(),t.loop=!1,t.removeEventListener(h.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(h.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(h.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(h.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch{}h.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},n._beginPlaying=function(t){return this._playbackResource=h.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},n._handleSoundReady=function(t){if(this._playbackResource.readyState!==4){var i=this._playbackResource;i.addEventListener(h.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),i.addEventListener(h.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),i.preload="auto",i.load();return}this._updateVolume(),this._playbackResource.currentTime=(this._startTime+this._position)*.001,this._audioSpriteStopTime?this._playbackResource.addEventListener(h.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(h.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},n._handleTagReady=function(t){this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},n._pause=function(){this._playbackResource.pause()},n._resume=function(){this._playbackResource.play()},n._updateVolume=function(){if(this._playbackResource!=null){var t=this._muted||h.Sound._masterMute?0:this._volume*h.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},n._calculateCurrentPosition=function(){return this._playbackResource.currentTime*1e3-this._startTime},n._updatePosition=function(){this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=(this._position+this._startTime)*.001}catch{this._handleSetPositionSeek(null)}},n._handleSetPositionSeek=function(t){this._playbackResource!=null&&(this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},n._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=this._startTime*.001,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},n._handleLoop=function(t){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},n._updateStartTime=function(){this._audioSpriteStopTime=(this._startTime+this._duration)*.001,this.playState==h.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(h.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},n._updateDuration=function(){this._audioSpriteStopTime=(this._startTime+this._duration)*.001,this.playState==h.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(h.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(h.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},n._setDurationFromSource=function(){this._duration=h.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},h.HTMLAudioSoundInstance=h.promote(o,"AbstractSoundInstance")}(),function(){function o(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=t._capabilities,this._loaderClass=h.SoundLoader,this._soundInstanceClass=h.HTMLAudioSoundInstance}var n=h.extend(o,h.AbstractPlugin),t=o;t.MAX_INSTANCES=30,t._AUDIO_READY="canplaythrough",t._AUDIO_ENDED="ended",t._AUDIO_SEEKED="seeked",t._AUDIO_STALLED="stalled",t._TIME_UPDATE="timeupdate",t._capabilities=null,t.isSupported=function(){return t._generateCapabilities(),t._capabilities!=null},t._generateCapabilities=function(){if(t._capabilities==null){var i=document.createElement("audio");if(i.canPlayType==null)return null;t._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=h.Sound.SUPPORTED_EXTENSIONS,r=h.Sound.EXTENSION_MAP,a=0,u=e.length;a<u;a++){var l=e[a],c=r[l]||l;t._capabilities[l]=i.canPlayType("audio/"+l)!="no"&&i.canPlayType("audio/"+l)!=""||i.canPlayType("audio/"+c)!="no"&&i.canPlayType("audio/"+c)!=""}}},n.register=function(i){var e=h.HTMLAudioTagPool.get(i.src),r=this.AbstractPlugin_register(i);return r.setTag(e),r},n.removeSound=function(i){this.AbstractPlugin_removeSound(i),h.HTMLAudioTagPool.remove(i)},n.create=function(i,e,r){var a=this.AbstractPlugin_create(i,e,r);return a.setPlaybackResource(null),a},n.toString=function(){return"[HTMLAudioPlugin]"},n.setVolume=n.getVolume=n.setMute=null,h.HTMLAudioPlugin=h.promote(o,"AbstractPlugin")}(),function(){function o(t,i,e){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=e||{},this.target=t,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=t,this._useTicks=!1,this._inited=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&o.removeTweens(t)),i&&i.paused?this._paused=!0:h.Tween._register(this,!0),i&&i.position!=null&&this.setPosition(i.position,o.NONE)}var n=h.extend(o,h.EventDispatcher);o.NONE=0,o.LOOP=1,o.REVERSE=2,o.IGNORE={},o._tweens=[],o._plugins={},o.get=function(t,i,e,r){return r&&o.removeTweens(t),new o(t,i,e)},o.tick=function(t,i){for(var e=o._tweens.slice(),r=e.length-1;r>=0;r--){var a=e[r];i&&!a.ignoreGlobalPause||a._paused||a.tick(a._useTicks?1:t)}},o.handleEvent=function(t){t.type=="tick"&&this.tick(t.delta,t.paused)},o.removeTweens=function(t){if(t.tweenjs_count){for(var i=o._tweens,e=i.length-1;e>=0;e--){var r=i[e];r._target==t&&(r._paused=!0,i.splice(e,1))}t.tweenjs_count=0}},o.removeAllTweens=function(){for(var t=o._tweens,i=0,e=t.length;i<e;i++){var r=t[i];r._paused=!0,r.target&&(r.target.tweenjs_count=0)}t.length=0},o.hasActiveTweens=function(t){return t?t.tweenjs_count!=null&&!!t.tweenjs_count:o._tweens&&!!o._tweens.length},o.installPlugin=function(t,i){var e=t.priority;e==null&&(t.priority=e=0);for(var r=0,a=i.length,u=o._plugins;r<a;r++){var l=i[r];if(!u[l])u[l]=[t];else{for(var c=u[l],d=0,f=c.length;d<f&&!(e<c[d].priority);d++);u[l].splice(d,0,t)}}},o._register=function(t,i){var e=t._target,r=o._tweens;if(i&&!t._registered)e&&(e.tweenjs_count=e.tweenjs_count?e.tweenjs_count+1:1),r.push(t),!o._inited&&h.Ticker&&(h.Ticker.addEventListener("tick",o),o._inited=!0);else if(!i&&t._registered){e&&e.tweenjs_count--;for(var a=r.length;a--;)if(r[a]==t){r.splice(a,1);break}}t._registered=i},n.wait=function(t,i){if(t==null||t<=0)return this;var e=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:e,e:this._linearEase,p1:e,v:i})},n.to=function(t,i,e){return(isNaN(i)||i<0)&&(i=0),this._addStep({d:i||0,p0:this._cloneProps(this._curQueueProps),e,p1:this._cloneProps(this._appendQueueProps(t))})},n.call=function(t,i,e){return this._addAction({f:t,p:i||[this],o:e||this._target})},n.set=function(t,i){return this._addAction({f:this._set,o:this,p:[t,i||this._target]})},n.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},n.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},n.setPosition=function(t,i){t<0&&(t=0),i==null&&(i=1);var e=t,r=!1;if(e>=this.duration&&(this.loop?e=e%this.duration:(e=this.duration,r=!0)),e==this._prevPos)return r;var a=this._prevPos;if(this.position=this._prevPos=e,this._prevPosition=t,this._target){if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var u=0,l=this._steps.length;u<l&&!(this._steps[u].t>e);u++);var c=this._steps[u-1];this._updateTargetProps(c,(this._stepPosition=e-c.t)/c.d)}}return i!=0&&this._actions.length>0&&(this._useTicks?this._runActions(e,e):i==1&&e<a?(a!=this.duration&&this._runActions(a,this.duration),this._runActions(0,e,!0)):this._runActions(a,e)),r&&this.setPaused(!0),this.dispatchEvent("change"),r},n.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},n.setPaused=function(t){return this._paused===!!t?this:(this._paused=!!t,o._register(this,!t),this)},n.w=n.wait,n.t=n.to,n.c=n.call,n.s=n.set,n.toString=function(){return"[Tween]"},n.clone=function(){throw"Tween can not be cloned."},n._updateTargetProps=function(t,i){var e,r,a,u,l,c;if(!t&&i==1)this.passive=!1,e=r=this._curQueueProps;else{if(this.passive=!!t.v,this.passive)return;t.e&&(i=t.e(i,0,1,1)),e=t.p0,r=t.p1}for(var d in this._initQueueProps){(u=e[d])==null&&(e[d]=u=this._initQueueProps[d]),(l=r[d])==null&&(r[d]=l=u),u==l||i==0||i==1||typeof u!="number"?a=i==1?l:u:a=u+(l-u)*i;var f=!1;if(c=o._plugins[d])for(var _=0,p=c.length;_<p;_++){var v=c[_].tween(this,d,a,e,r,i,!!t&&e==r,!t);v==o.IGNORE?f=!0:a=v}f||(this._target[d]=a)}},n._runActions=function(t,i,e){var r=t,a=i,u=-1,l=this._actions.length,c=1;for(t>i&&(r=i,a=t,u=l,l=c=-1);(u+=c)!=l;){var d=this._actions[u],f=d.t;(f==a||f>r&&f<a||e&&f==t)&&d.f.apply(d.o,d.p)}},n._appendQueueProps=function(t){var i,e,r,a,u;for(var l in t)if(this._initQueueProps[l]===void 0){if(e=this._target[l],i=o._plugins[l])for(r=0,a=i.length;r<a;r++)e=i[r].init(this,l,e);this._initQueueProps[l]=this._curQueueProps[l]=e===void 0?null:e}else e=this._curQueueProps[l];for(var l in t){if(e=this._curQueueProps[l],i=o._plugins[l])for(u=u||{},r=0,a=i.length;r<a;r++)i[r].step&&i[r].step(this,l,e,t[l],u);this._curQueueProps[l]=t[l]}return u&&this._appendQueueProps(u),this._curQueueProps},n._cloneProps=function(t){var i={};for(var e in t)i[e]=t[e];return i},n._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},n._set=function(t,i){for(var e in t)i[e]=t[e]},h.Tween=h.promote(o,"EventDispatcher")}(),function(){function o(t,i,e){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,e&&(this._useTicks=e.useTicks,this.loop=e.loop,this.ignoreGlobalPause=e.ignoreGlobalPause,e.onChange&&this.addEventListener("change",e.onChange)),t&&this.addTween.apply(this,t),this.setLabels(i),e&&e.paused?this._paused=!0:h.Tween._register(this,!0),e&&e.position!=null&&this.setPosition(e.position,h.Tween.NONE)}var n=h.extend(o,h.EventDispatcher);n.addTween=function(t){var i=arguments.length;if(i>1){for(var e=0;e<i;e++)this.addTween(arguments[e]);return arguments[0]}else if(i==0)return null;return this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,h.Tween.NONE),t},n.removeTween=function(t){var i=arguments.length;if(i>1){for(var e=!0,a=0;a<i;a++)e=e&&this.removeTween(arguments[a]);return e}else if(i==0)return!1;for(var r=this._tweens,a=r.length;a--;)if(r[a]==t)return r.splice(a,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},n.addLabel=function(t,i){this._labels[t]=i;var e=this._labelList;if(e){for(var r=0,a=e.length;r<a&&!(i<e[r].position);r++);e.splice(r,0,{label:t,position:i})}},n.setLabels=function(t){this._labels=t||{}},n.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var i=this._labels;for(var e in i)t.push({label:e,position:i[e]});t.sort(function(r,a){return r.position-a.position})}return t},n.getCurrentLabel=function(){var t=this.getLabels(),i=this.position,e=t.length;if(e){for(var r=0;r<e&&!(i<t[r].position);r++);return r==0?null:t[r-1].label}return null},n.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},n.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},n.setPosition=function(t,i){var e=this._calcPosition(t),r=!this.loop&&t>=this.duration;if(e==this._prevPos)return r;this._prevPosition=t,this.position=this._prevPos=e;for(var a=0,u=this._tweens.length;a<u;a++)if(this._tweens[a].setPosition(e,i),e!=this._prevPos)return!1;return r&&this.setPaused(!0),this.dispatchEvent("change"),r},n.setPaused=function(t){this._paused=!!t,h.Tween._register(this,!t)},n.updateDuration=function(){this.duration=0;for(var t=0,i=this._tweens.length;t<i;t++){var e=this._tweens[t];e.duration>this.duration&&(this.duration=e.duration)}},n.tick=function(t){this.setPosition(this._prevPosition+t)},n.resolve=function(t){var i=Number(t);return isNaN(i)&&(i=this._labels[t]),i},n.toString=function(){return"[Timeline]"},n.clone=function(){throw"Timeline can not be cloned."},n._goto=function(t){var i=this.resolve(t);i!=null&&this.setPosition(i)},n._calcPosition=function(t){return t<0?0:t<this.duration?t:this.loop?t%this.duration:this.duration},h.Timeline=h.promote(o,"EventDispatcher")}(),function(){function o(){throw"Ease cannot be instantiated."}o.linear=function(n){return n},o.none=o.linear,o.get=function(n){return n<-1&&(n=-1),n>1&&(n=1),function(t){return n==0?t:n<0?t*(t*-n+1+n):t*((2-t)*n+(1-n))}},o.getPowIn=function(n){return function(t){return Math.pow(t,n)}},o.getPowOut=function(n){return function(t){return 1-Math.pow(1-t,n)}},o.getPowInOut=function(n){return function(t){return(t*=2)<1?.5*Math.pow(t,n):1-.5*Math.abs(Math.pow(2-t,n))}},o.quadIn=o.getPowIn(2),o.quadOut=o.getPowOut(2),o.quadInOut=o.getPowInOut(2),o.cubicIn=o.getPowIn(3),o.cubicOut=o.getPowOut(3),o.cubicInOut=o.getPowInOut(3),o.quartIn=o.getPowIn(4),o.quartOut=o.getPowOut(4),o.quartInOut=o.getPowInOut(4),o.quintIn=o.getPowIn(5),o.quintOut=o.getPowOut(5),o.quintInOut=o.getPowInOut(5),o.sineIn=function(n){return 1-Math.cos(n*Math.PI/2)},o.sineOut=function(n){return Math.sin(n*Math.PI/2)},o.sineInOut=function(n){return-.5*(Math.cos(Math.PI*n)-1)},o.getBackIn=function(n){return function(t){return t*t*((n+1)*t-n)}},o.backIn=o.getBackIn(1.7),o.getBackOut=function(n){return function(t){return--t*t*((n+1)*t+n)+1}},o.backOut=o.getBackOut(1.7),o.getBackInOut=function(n){return n*=1.525,function(t){return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)}},o.backInOut=o.getBackInOut(1.7),o.circIn=function(n){return-(Math.sqrt(1-n*n)-1)},o.circOut=function(n){return Math.sqrt(1- --n*n)},o.circInOut=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},o.bounceIn=function(n){return 1-o.bounceOut(1-n)},o.bounceOut=function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},o.bounceInOut=function(n){return n<.5?o.bounceIn(n*2)*.5:o.bounceOut(n*2-1)*.5+.5},o.getElasticIn=function(n,t){var i=Math.PI*2;return function(e){if(e==0||e==1)return e;var r=t/i*Math.asin(1/n);return-(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*i/t))}},o.elasticIn=o.getElasticIn(1,.3),o.getElasticOut=function(n,t){var i=Math.PI*2;return function(e){if(e==0||e==1)return e;var r=t/i*Math.asin(1/n);return n*Math.pow(2,-10*e)*Math.sin((e-r)*i/t)+1}},o.elasticOut=o.getElasticOut(1,.3),o.getElasticInOut=function(n,t){var i=Math.PI*2;return function(e){var r=t/i*Math.asin(1/n);return(e*=2)<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*i/t)):n*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*i/t)*.5+1}},o.elasticInOut=o.getElasticInOut(1,.3*1.5),h.Ease=o}(),function(){function o(){throw"MotionGuidePlugin cannot be instantiated."}o.priority=0,o._rotOffS,o._rotOffE,o._rotNormS,o._rotNormE,o.install=function(){return h.Tween.installPlugin(o,["guide","x","y","rotation"]),h.Tween.IGNORE},o.init=function(n,t,i){var e=n.target;return e.hasOwnProperty("x")||(e.x=0),e.hasOwnProperty("y")||(e.y=0),e.hasOwnProperty("rotation")||(e.rotation=0),t=="rotation"&&(n.__needsRot=!0),t=="guide"?null:i},o.step=function(n,t,i,e,r){if(t=="rotation"&&(n.__rotGlobalS=i,n.__rotGlobalE=e,o.testRotData(n,r)),t!="guide")return e;var a,u=e;u.hasOwnProperty("path")||(u.path=[]);var l=u.path;if(u.hasOwnProperty("end")||(u.end=1),u.hasOwnProperty("start")||(u.start=i&&i.hasOwnProperty("end")&&i.path===l?i.end:0),u.hasOwnProperty("_segments")&&u._length)return e;var c=l.length,d=10;if(c>=6&&(c-2)%4==0){u._segments=[],u._length=0;for(var f=2;f<c;f+=4){for(var _=l[f-2],p=l[f-1],v=l[f+0],g=l[f+1],E=l[f+2],w=l[f+3],R=_,M=p,x,C,N=0,V=[],k=1;k<=d;k++){var H=k/d,B=1-H;x=B*B*_+2*B*H*v+H*H*E,C=B*B*p+2*B*H*g+H*H*w,N+=V[V.push(Math.sqrt((a=x-R)*a+(a=C-M)*a))-1],R=x,M=C}u._segments.push(N),u._segments.push(V),u._length+=N}}else throw"invalid 'path' data, please see documentation for valid paths";a=u.orient,u.orient=!0;var J={};return o.calc(u,u.start,J),n.__rotPathS=Number(J.rotation.toFixed(5)),o.calc(u,u.end,J),n.__rotPathE=Number(J.rotation.toFixed(5)),u.orient=!1,o.calc(u,u.end,r),u.orient=a,u.orient&&(n.__guideData=u,o.testRotData(n,r)),e},o.testRotData=function(n,t){if(n.__rotGlobalS===void 0||n.__rotGlobalE===void 0){if(n.__needsRot)return;n._curQueueProps.rotation!==void 0?n.__rotGlobalS=n.__rotGlobalE=n._curQueueProps.rotation:n.__rotGlobalS=n.__rotGlobalE=t.rotation=n.target.rotation||0}if(n.__guideData!==void 0){var i=n.__guideData,e=n.__rotGlobalE-n.__rotGlobalS,r=n.__rotPathE-n.__rotPathS,a=e-r;if(i.orient=="auto")a>180?a-=360:a<-180&&(a+=360);else if(i.orient=="cw"){for(;a<0;)a+=360;a==0&&e>0&&e!=180&&(a+=360)}else if(i.orient=="ccw"){for(a=e-(r>180?360-r:r);a>0;)a-=360;a==0&&e<0&&e!=-180&&(a-=360)}i.rotDelta=a,i.rotOffS=n.__rotGlobalS-n.__rotPathS,n.__rotGlobalS=n.__rotGlobalE=n.__guideData=n.__needsRot=void 0}},o.tween=function(n,t,i,e,r,a,u,l){var c=r.guide;if(c==null||c===e.guide)return i;if(c.lastRatio!=a){var d=(c.end-c.start)*(u?c.end:a)+c.start;switch(o.calc(c,d,n.target),c.orient){case"cw":case"ccw":case"auto":n.target.rotation+=c.rotOffS+c.rotDelta*a;break;case"fixed":default:n.target.rotation+=c.rotOffS;break}c.lastRatio=a}return t=="rotation"&&(!c.orient||c.orient=="false")?i:n.target[t]},o.calc=function(n,t,i){if(n._segments==null)throw"Missing critical pre-calculated information, please file a bug";i==null&&(i={x:0,y:0,rotation:0});for(var e=n._segments,r=n.path,a=n._length*t,u=e.length-2,l=0;a>e[l]&&l<u;)a-=e[l],l+=2;var c=e[l+1],d=0;for(u=c.length-1;a>c[d]&&d<u;)a-=c[d],d++;var f=d/++u+a/(u*c[d]);l=l*2+2;var _=1-f;return i.x=_*_*r[l-2]+2*_*f*r[l+0]+f*f*r[l+2],i.y=_*_*r[l-1]+2*_*f*r[l+1]+f*f*r[l+3],n.orient&&(i.rotation=57.2957795*Math.atan2((r[l+1]-r[l-1])*_+(r[l+3]-r[l+1])*f,(r[l+0]-r[l-2])*_+(r[l+2]-r[l+0])*f)),i},h.MotionGuidePlugin=o}(),function(){var o=h.TweenJS=h.TweenJS||{};o.version="0.6.2",o.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),X.exports=st.createjs})(Vt,it);const Dt=500,Nt=300,Z=50,At=Dt/Z,xt=Nt/Z;class kt{constructor(D,h){dt(this,"_x");dt(this,"_y");dt(this,"obj");if(!(0<=D&&D<At&&0<=h&&h<xt))throw new RangeError("Out of Range");this._x=D,this._y=h,this.obj=new it.Shape,Ut.addChild(this.obj)}get x(){return this._x}set x(D){if(!(0<=D&&D<At))throw new RangeError("Out of Range");this._x=D}get y(){return this._y}set y(D){if(!(0<=D&&D<xt))throw new RangeError("Out of Range");this._y=D}}function Ft(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}class jt extends kt{constructor(D,h){super(D,h),this.obj.graphics.beginFill(Ft()).drawRect(this.x*Z,this.y*Z,Z,Z)}}class Yt extends kt{constructor(D,h){super(D,h),this.obj.graphics.beginFill(Ft()).drawCircle(this.x*Z+Z/2,this.y*Z+Z/2,Z/3)}move(D,h){this.x+=D,this.y+=h,it.Tween.get(this.obj).to({x:this.x*Z,y:this.y*Z},100,it.Ease.getPowOut(10))}}const Ht=document.querySelector("#app");if(!(Ht instanceof HTMLDivElement))throw new Error("No App");const ft=document.createElement("canvas");ft.setAttribute("id","main");ft.setAttribute("width",Dt.toString());ft.setAttribute("height",Nt.toString());Ht.appendChild(ft);const Ut=new it.Stage("main");it.Ticker.framerate=60;it.Ticker.addEventListener("tick",Ut);const Rt=[];for(let X=0;X<xt;X++){Rt.push([]);for(let D=0;D<At;D++)Rt[X].push(new jt(D,X))}console.log(Rt);const ut=new Yt(0,0);console.log(ut);document.addEventListener("keydown",X=>{switch(X.code){case"ArrowLeft":case"KeyA":ut.move(-1,0);break;case"ArrowRight":case"KeyD":ut.move(1,0);break;case"ArrowUp":case"KeyW":ut.move(0,-1);break;case"ArrowDown":case"KeyS":ut.move(0,1);break}});
